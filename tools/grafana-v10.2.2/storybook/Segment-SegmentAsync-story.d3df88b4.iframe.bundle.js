"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[8996],{"../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/index.mjs":function(w,C,l){l.d(C,{aD:function(){return i.aD}});var i=l("../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs"),t=(...y)=>{let O=config,c=y;c.length===1&&Array.isArray(c[0])&&([c]=c),c.length!==1&&typeof c[c.length-1]!="string"&&(O={...config,...c.pop()});let d=c[0];(c.length!==1||typeof d=="string")&&(d={},c.forEach(g=>{d[g]=g}));let f={};return Object.keys(d).forEach(g=>{f[g]=action(d[g],O)}),f}},"./src/components/Forms/InlineFieldRow.tsx":function(w,C,l){l.d(C,{Z:function(){return h}});var i=l("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),y=l("./src/themes/ThemeContext.tsx"),O=Object.defineProperty,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(u,p,e)=>p in u?O(u,p,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[p]=e,S=(u,p)=>{for(var e in p||(p={}))d.call(p,e)&&g(u,e,p[e]);if(c)for(var e of c(p))f.call(p,e)&&g(u,e,p[e]);return u},x=(u,p)=>{var e={};for(var n in u)d.call(u,n)&&p.indexOf(n)<0&&(e[n]=u[n]);if(u!=null&&c)for(var n of c(u))p.indexOf(n)<0&&f.call(u,n)&&(e[n]=u[n]);return e};const h=u=>{var p=u,{children:e,className:n}=p,a=x(p,["children","className"]);const _=(0,y.wW)(E);return t.createElement("div",S({className:(0,i.cx)(_.container,n)},a),e)},E=u=>({container:(0,i.iv)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:u.spacing(.5)})});try{h.displayName="InlineFieldRow",h.__docgenInfo={description:"",displayName:"InlineFieldRow",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"]={docgenInfo:h.__docgenInfo,name:"InlineFieldRow",path:"src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"})}catch{}},"./src/components/Forms/InlineLabel.tsx":function(w,C,l){l.d(C,{W:function(){return u}});var i=l("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),y=l("./src/themes/ThemeContext.tsx"),O=l("./src/components/Icon/Icon.tsx"),c=l("./src/components/Tooltip/Tooltip.tsx"),d=Object.defineProperty,f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,x=(e,n,a)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,h=(e,n)=>{for(var a in n||(n={}))g.call(n,a)&&x(e,a,n[a]);if(f)for(var a of f(n))S.call(n,a)&&x(e,a,n[a]);return e},E=(e,n)=>{var a={};for(var _ in e)g.call(e,_)&&n.indexOf(_)<0&&(a[_]=e[_]);if(e!=null&&f)for(var _ of f(e))n.indexOf(_)<0&&S.call(e,_)&&(a[_]=e[_]);return a};const u=e=>{var n=e,{children:a,className:_,tooltip:L,width:F,transparent:U,interactive:W,as:N="label"}=n,P=E(n,["children","className","tooltip","width","transparent","interactive","as"]);const B=(0,y.wW)(p,U,F);return t.createElement(N,h({className:(0,i.cx)(B.label,_)},P),a,L&&t.createElement(c.u,{interactive:W,placement:"top",content:L,theme:"info"},t.createElement(O.J,{tabIndex:0,name:"info-circle",size:"sm",className:B.icon})))},p=(e,n=!1,a)=>({label:(0,i.iv)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.size.sm,backgroundColor:n?"transparent":e.colors.background.secondary,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),marginRight:e.spacing(.5),borderRadius:e.shape.radius.default,border:"none",width:a?a!=="auto"?`${8*a}px`:a:"100%",color:e.colors.text.primary}),icon:(0,i.iv)({color:e.colors.text.secondary,marginLeft:"10px",":hover":{color:e.colors.text.primary}})});try{u.displayName="InlineLabel",u.__docgenInfo={description:"",displayName:"InlineLabel",props:{tooltip:{defaultValue:null,description:`Content for the labels tooltip. If provided, an info icon with the tooltip content
will be displayed`,name:"tooltip",required:!1,type:{name:"PopoverContent"}},width:{defaultValue:null,description:"Custom width for the label",name:"width",required:!1,type:{name:'number | "auto"'}},transparent:{defaultValue:null,description:"Make labels's background transparent",name:"transparent",required:!1,type:{name:"boolean"}},interactive:{defaultValue:null,description:"Make tooltip interactive",name:"interactive",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"Controls which element the InlineLabel should be rendered into",name:"as",required:!1,type:{name:"ElementType<any>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineLabel.tsx#InlineLabel"]={docgenInfo:u.__docgenInfo,name:"InlineLabel",path:"src/components/Forms/InlineLabel.tsx#InlineLabel"})}catch{}},"./src/components/Segment/SegmentSection.tsx":function(w,C,l){l.d(C,{f:function(){return d}});var i=l("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),y=l("./src/themes/ThemeContext.tsx"),O=l("./src/components/Forms/InlineFieldRow.tsx"),c=l("./src/components/Forms/InlineLabel.tsx");const d=({label:g,htmlFor:S,children:x,fill:h})=>{const E=(0,y.wW)(f);return t.createElement(t.Fragment,null,t.createElement(O.Z,null,t.createElement(c.W,{htmlFor:S,width:12,className:E.label},g),x,h&&t.createElement("div",{className:E.fill},t.createElement(c.W,null,""))))},f=g=>({label:(0,i.iv)({color:g.colors.primary.text}),fill:(0,i.iv)({flexGrow:1,marginBottom:g.spacing(.5)})});try{d.displayName="SegmentSection",d.__docgenInfo={description:"Horizontal section for editor components.",displayName:"SegmentSection",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},htmlFor:{defaultValue:null,description:"",name:"htmlFor",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"",name:"fill",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentSection.tsx#SegmentSection"]={docgenInfo:d.__docgenInfo,name:"SegmentSection",path:"src/components/Segment/SegmentSection.tsx#SegmentSection"})}catch{}},"./src/components/Segment/SegmentSelect.tsx":function(w,C,l){l.d(C,{V:function(){return p}});var i=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),t=l("./src/themes/ThemeContext.tsx"),y=l("./src/components/Select/Select.tsx"),O=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,x=(e,n,a)=>n in e?O(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,h=(e,n)=>{for(var a in n||(n={}))g.call(n,a)&&x(e,a,n[a]);if(f)for(var a of f(n))S.call(n,a)&&x(e,a,n[a]);return e},E=(e,n)=>c(e,d(n)),u=(e,n)=>{var a={};for(var _ in e)g.call(e,_)&&n.indexOf(_)<0&&(a[_]=e[_]);if(e!=null&&f)for(var _ of f(e))n.indexOf(_)<0&&S.call(e,_)&&(a[_]=e[_]);return a};function p(e){var n=e,{value:a,placeholder:_="",options:L=[],onChange:F,onClickOutside:U,loadOptions:W=void 0,width:N,noOptionsMessage:P="",allowCustomValue:B=!1,allowEmptyValue:ae=!1}=n,oe=u(n,["value","placeholder","options","onChange","onClickOutside","loadOptions","width","noOptionsMessage","allowCustomValue","allowEmptyValue"]);const K=(0,i.useRef)(null),ne=(0,t.l4)();let re=N>0?N/ne.spacing.gridSize:void 0,H,Y={};return W?(H=y.qb,Y={loadOptions:W,defaultOptions:!0}):H=y.Ph,i.createElement("div",E(h({},oe),{ref:K}),i.createElement(H,h({width:re,noOptionsMessage:P,placeholder:_,autoFocus:!0,isOpen:!0,onChange:F,options:L,value:a,closeMenuOnSelect:!1,onCloseMenu:()=>{if(K&&K.current){const m=K.current.querySelector('input[id^="react-select-"]');m&&(m.value||ae)?F({value:m.value,label:m.value}):U()}},allowCustomValue:B},Y)))}try{p.displayName="SegmentSelect",p.__docgenInfo={description:"",displayName:"SegmentSelect",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T | SelectableValue<T>"}},options:{defaultValue:{value:"[]"},description:"",name:"options",required:!1,type:{name:"SelectableValue<T>[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: SelectableValue<T>) => void"}},loadOptions:{defaultValue:{value:"undefined"},description:"If provided - AsyncSelect will be used allowing to reload options when the value in the input changes",name:"loadOptions",required:!1,type:{name:"((inputValue: string) => Promise<SelectableValue<T>[]>)"}},onClickOutside:{defaultValue:null,description:"",name:"onClickOutside",required:!0,type:{name:"() => void"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},noOptionsMessage:{defaultValue:{value:""},description:"",name:"noOptionsMessage",required:!1,type:{name:"string"}},allowCustomValue:{defaultValue:{value:"false"},description:"",name:"allowCustomValue",required:!1,type:{name:"boolean"}},allowEmptyValue:{defaultValue:{value:"false"},description:`If true, empty value will be passed to onChange callback otherwise using empty value
will work as canceling and using the previous value`,name:"allowEmptyValue",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentSelect.tsx#SegmentSelect"]={docgenInfo:p.__docgenInfo,name:"SegmentSelect",path:"src/components/Segment/SegmentSelect.tsx#SegmentSelect"})}catch{}},"./src/components/Segment/styles.ts":function(w,C,l){l.d(C,{N:function(){return t}});var i=l("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");const t=y=>{const O="v1"in y?y.v1.palette:y.palette;return{segment:(0,i.iv)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,i.iv)({color:O.gray2}),disabled:(0,i.iv)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},"./src/components/Segment/useExpandableLabel.tsx":function(w,C,l){l.d(C,{_:function(){return O}});var i=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),t=l("./src/themes/ThemeContext.tsx"),y=l("./src/components/Button/Button.tsx");const O=(c,d)=>{const f=(0,i.useRef)(null),g=(0,t.wW)(y.gN),[S,x]=(0,i.useState)(c),[h,E]=(0,i.useState)(0),u=e=>{x(e),d&&d(e)};return[({Component:e,onClick:n,disabled:a})=>i.createElement("button",{type:"button",className:g,ref:f,disabled:a,onClick:()=>{u(!0),f&&f.current&&E(f.current.clientWidth*1.25),n?.()}},e),h,S,u]}},"./src/utils/i18n.tsx":function(w,C,l){l.d(C,{c:function(){return E},t:function(){return p}});var i=l("../../../yarn/cache/i18next-npm-22.0.4-de33bcaaf1-aa49e6e485.zip/node_modules/i18next/dist/esm/i18next.js"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),y=l("../../.yarn/__virtual__/react-i18next-virtual-c91fd2d29a/2/yarn/cache/react-i18next-npm-12.0.0-bf53cb5be8-f523d7ec5d.zip/node_modules/react-i18next/dist/es/context.js"),O=l("../../.yarn/__virtual__/react-i18next-virtual-c91fd2d29a/2/yarn/cache/react-i18next-npm-12.0.0-bf53cb5be8-f523d7ec5d.zip/node_modules/react-i18next/dist/es/Trans.js"),c=Object.defineProperty,d=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,S=(e,n,a)=>n in e?c(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,x=(e,n)=>{for(var a in n||(n={}))f.call(n,a)&&S(e,a,n[a]);if(d)for(var a of d(n))g.call(n,a)&&S(e,a,n[a]);return e};function h(){typeof i.ZP.options.resources!="object"&&i.ZP.use(y.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const E=e=>(h(),t.createElement(O.c,x({},e))),u=i.ZP.t,p=(e,n,a)=>(h(),u(e,n,a));try{E.displayName="Trans",E.__docgenInfo={description:"",displayName:"Trans",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"readonly ReactElement<any, string | JSXElementConstructor<any>>[] | { readonly [tagName: string]: ReactElement<any, string | JSXElementConstructor<any>>; }"}},count:{defaultValue:null,description:"",name:"count",required:!1,type:{name:"number"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"string"}},defaults:{defaultValue:null,description:"",name:"defaults",required:!1,type:{name:"string"}},i18n:{defaultValue:null,description:"",name:"i18n",required:!1,type:{name:"i18n"}},i18nKey:{defaultValue:null,description:"",name:"i18nKey",required:!1,type:{name:"unknown"}},ns:{defaultValue:null,description:"",name:"ns",required:!1,type:{name:"Namespace<string>"}},parent:{defaultValue:null,description:"",name:"parent",required:!1,type:{name:"string | ComponentType<any> | null"}},tOptions:{defaultValue:null,description:"",name:"tOptions",required:!1,type:{name:"{}"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"{}"}},shouldUnescape:{defaultValue:null,description:"",name:"shouldUnescape",required:!1,type:{name:"boolean"}},t:{defaultValue:null,description:"",name:"t",required:!1,type:{name:"TFunction<N, TKPrefix>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/utils/i18n.tsx#Trans"]={docgenInfo:E.__docgenInfo,name:"Trans",path:"src/utils/i18n.tsx#Trans"})}catch{}},"./src/components/Segment/SegmentAsync.story.tsx":function(w,C,l){l.r(C),l.d(C,{ArrayOptions:function(){return q},ArrayOptionsWithPrimitiveValue:function(){return Z},Basic:function(){return j},CustomLabel:function(){return X},CustomOptionsAllowed:function(){return G},CustomStateMessageHandler:function(){return $},GroupedArrayOptions:function(){return J},HtmlAttributes:function(){return Q},default:function(){return Ye}});var i=l("../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/index.mjs"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),y=l("./src/components/Icon/Icon.tsx"),O=l("./src/components/Segment/SegmentSection.tsx"),c=l("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=l("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),f=l("../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useAsyncFn.js"),g=l("./src/themes/ThemeContext.tsx"),S=l("./src/utils/i18n.tsx"),x=l("./src/components/Forms/InlineLabel.tsx"),h=l("./src/components/Segment/SegmentSelect.tsx"),E=l("./src/components/Segment/styles.ts"),u=l("./src/components/Segment/useExpandableLabel.tsx"),p=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,F=(r,s,o)=>s in r?p(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,U=(r,s)=>{for(var o in s||(s={}))_.call(s,o)&&F(r,o,s[o]);if(a)for(var o of a(s))L.call(s,o)&&F(r,o,s[o]);return r},W=(r,s)=>e(r,n(s)),N=(r,s)=>{var o={};for(var v in r)_.call(r,v)&&s.indexOf(v)<0&&(o[v]=r[v]);if(r!=null&&a)for(var v of a(r))s.indexOf(v)<0&&L.call(r,v)&&(o[v]=r[v]);return o};function P(r){var s=r,{value:o,onChange:v,loadOptions:b,reloadOptionsOnChange:z=!1,Component:k,className:D,allowCustomValue:R,allowEmptyValue:ee,disabled:Re,placeholder:De,inputMinWidth:Le,inputPlaceholder:qe,autofocus:Ze=!1,onExpandedChange:Je,noOptionMessageHandler:Ge=B}=s,Xe=N(s,["value","onChange","loadOptions","reloadOptionsOnChange","Component","className","allowCustomValue","allowEmptyValue","disabled","placeholder","inputMinWidth","inputPlaceholder","autofocus","onExpandedChange","noOptionMessageHandler"]),Fe;const[je,We]=(0,f.Z)(b,[b]),[$e,Ne,Qe,Be]=(0,u._)(Ze,Je),ke=Le?Math.max(Le,Ne):Ne,se=(0,g.wW)(E.N);if(!Qe){const te=(0,d.isObject)(o)?o.label:o,en=te!=null?String(te):void 0;return t.createElement($e,{onClick:z?void 0:We,disabled:Re,Component:k||t.createElement(x.W,{className:(0,c.cx)(se.segment,{[se.queryPlaceholder]:De!==void 0&&!o,[se.disabled]:Re},D)},en||De)})}return t.createElement(h.V,W(U({},Xe),{value:o&&!(0,d.isObject)(o)?{value:o}:o,placeholder:qe,options:(Fe=je.value)!=null?Fe:[],loadOptions:z?We:void 0,width:ke,noOptionsMessage:Ge(je),allowCustomValue:R,allowEmptyValue:ee,onClickOutside:()=>{Be(!1)},onChange:te=>{Be(!1),v(te)}}))}function B(r){return r.loading?(0,S.t)("grafana-ui.segment-async.loading","Loading options..."):r.error?(0,S.t)("grafana-ui.segment-async.error","Failed to load options"):(0,S.t)("grafana-ui.segment-async.no-options","No options found")}try{P.displayName="SegmentAsync",P.__docgenInfo={description:"",displayName:"SegmentAsync",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T | SelectableValue<T>"}},loadOptions:{defaultValue:null,description:"",name:"loadOptions",required:!0,type:{name:"(query?: string | undefined) => Promise<SelectableValue<T>[]>"}},reloadOptionsOnChange:{defaultValue:{value:"false"},description:`If true options will be reloaded when user changes the value in the input,
otherwise, options will be loaded when the segment is clicked`,name:"reloadOptionsOnChange",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(item: SelectableValue<T>) => void"}},noOptionMessageHandler:{defaultValue:null,description:"",name:"noOptionMessageHandler",required:!1,type:{name:"((state: AsyncState<SelectableValue<T>[]>) => string)"}},inputMinWidth:{defaultValue:null,description:"",name:"inputMinWidth",required:!1,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},allowCustomValue:{defaultValue:null,description:"",name:"allowCustomValue",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!1,type:{name:"((expanded: boolean) => void)"}},autofocus:{defaultValue:{value:"false"},description:"",name:"autofocus",required:!1,type:{name:"boolean"}},allowEmptyValue:{defaultValue:null,description:"",name:"allowEmptyValue",required:!1,type:{name:"boolean"}},inputPlaceholder:{defaultValue:null,description:"",name:"inputPlaceholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentAsync.tsx#SegmentAsync"]={docgenInfo:P.__docgenInfo,name:"SegmentAsync",path:"src/components/Segment/SegmentAsync.tsx#SegmentAsync"})}catch{}var ae=Object.defineProperty,oe=Object.defineProperties,K=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,Y=(r,s,o)=>s in r?ae(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,m=(r,s)=>{for(var o in s||(s={}))re.call(s,o)&&Y(r,o,s[o]);if(ne)for(var o of ne(s))H.call(s,o)&&Y(r,o,s[o]);return r},V=(r,s)=>oe(r,K(s)),Ke=(r,s,o)=>new Promise((v,b)=>{var z=R=>{try{D(o.next(R))}catch(ee){b(ee)}},k=R=>{try{D(o.throw(R))}catch(ee){b(ee)}},D=R=>R.done?v(R.value):Promise.resolve(R.value).then(z,k);D((o=o.apply(r,s)).next())}),ie,ue,ce,de,pe,me,fe,ge,ve,_e,ye,Oe,Se,he,Ee,Ce,be,Pe,xe,Ae,Ve,Ie,Te,we;const ze=t.createElement("span",{className:"gf-form-label query-part"},t.createElement(y.J,{name:"plus"})),le=r=>({label:String(r),value:r}),I=["Option1","Option2","OptionWithLooongLabel","Option4"].map(le),A=r=>new Promise(s=>setTimeout(()=>s(r),2e3)),Me=()=>new Promise((r,s)=>setTimeout(()=>s(Error("Could not find data")),2e3)),M=({loadOptions:r,children:s})=>t.createElement(t.Fragment,null,t.createElement(O.f,{label:"Segment Name"},s,t.createElement(P,{Component:ze,onChange:o=>(0,i.aD)("New value added")(o),loadOptions:()=>r(I)}))),q=()=>{const[r,s]=(0,t.useState)(I[0]);return t.createElement(M,{loadOptions:()=>A(I)},t.createElement(P,{value:r,loadOptions:()=>A(I),onChange:o=>{s(o),(0,i.aD)("Segment value changed")(o.value)}}))},Ue={title:"Data Source/Segment/SegmentAsync",component:P},Z=()=>{const[r,s]=(0,t.useState)(I[0].value);return t.createElement(M,{loadOptions:()=>A(I)},t.createElement(P,{value:r,loadOptions:()=>A(I),onChange:({value:o})=>{s(o),(0,i.aD)("Segment value changed")(o)}}))},T=[{label:"Names",options:["Jane","Tom","Lisa"].map(le)},{label:"Prime",options:[2,3,5,7,11,13].map(le)}],J=()=>{const[r,s]=(0,t.useState)(T[0].options[0]);return t.createElement(M,{loadOptions:()=>A(T)},t.createElement(P,{value:r,loadOptions:()=>A(T),onChange:o=>{s(o),(0,i.aD)("Segment value changed")(o.value)}}))},G=()=>{const[r,s]=(0,t.useState)(T[0].options[0]);return t.createElement(M,{loadOptions:()=>A(T)},t.createElement(P,{allowCustomValue:!0,value:r,loadOptions:()=>A(I),onChange:o=>{s(o),(0,i.aD)("Segment value changed")(o.value)}}))},He=({value:r})=>t.createElement("div",{className:"gf-form-label"},"custom(",String(r),")"),X=()=>{const[r,s]=(0,t.useState)(T[0].options[0].value);return t.createElement(M,{loadOptions:()=>A(T)},t.createElement(P,{Component:t.createElement(He,{value:r}),loadOptions:()=>A(T),onChange:({value:o})=>{s(o),(0,i.aD)("Segment value changed")(o)}}))},$=()=>{const r=v=>v.loading?"You're going too fast for me, please wait...":v.error?"Outch ! We encountered an error...":!Array.isArray(v.value)||v.value.length===0?"It is empty :)":"",[s,o]=(0,t.useState)(I[0].value);return t.createElement(t.Fragment,null,t.createElement(M,{loadOptions:()=>A(T)},t.createElement(P,{value:s,noOptionMessageHandler:r,loadOptions:()=>A(T),onChange:({value:v})=>{o(v),(0,i.aD)("Segment value changed")(v)}})),t.createElement(M,{loadOptions:()=>A([])},t.createElement(P,{value:s,noOptionMessageHandler:r,loadOptions:()=>A([]),onChange:({value:v})=>{o(v),(0,i.aD)("Segment value changed")(v)}})),t.createElement(M,{loadOptions:()=>Me()},t.createElement(P,{value:s,noOptionMessageHandler:r,loadOptions:()=>Me(),onChange:({value:v})=>{o(v),(0,i.aD)("Segment value changed")(v)}})))},Q=()=>{const[r,s]=(0,t.useState)(I[0]);return t.createElement(M,{loadOptions:()=>A(I)},t.createElement(P,{"data-testid":"segment-async-test",id:"segment-async",value:r,loadOptions:()=>A(I),onChange:o=>{s(o),(0,i.aD)("Segment value changed")(o.value)}}))},j=r=>{const[s,o]=(0,t.useState)(r.value),v=V(m({},r),{value:s,loadOptions:(b="")=>Ke(void 0,null,function*(){(0,i.aD)("loadOptions fired")({query:b});const z=yield A(I);return b?z.filter(k=>{var D;return(D=k.label)==null?void 0:D.includes(b)}):A(I)}),onChange:({value:b})=>{o(b),(0,i.aD)("onChange fired")(b)},onExpandedChange:b=>(0,i.aD)("onExpandedChange fired")({expanded:b}),noOptionMessageHandler:b=>((0,i.aD)("noOptionMessageHandler fired")(b),b.loading?"Loading...":b.error?"Failed to load options":!Array.isArray(b.value)||b.value.length===0?"No options found":"")});return t.createElement(O.f,{label:"Segment:"},t.createElement(P,m({},v)))};j.parameters={controls:{exclude:["value","loadOptions","onChange","noOptionMessageHandler","Component","className","onExpandedChange"]}},j.args={inputMinWidth:0,allowCustomValue:!1,reloadOptionsOnChange:!1,placeholder:"Placeholder text",disabled:!1,autofocus:!1,allowEmptyValue:!1,inputPlaceholder:"Start typing..."};var Ye=Ue;q.parameters=V(m({},q.parameters),{docs:V(m({},(ie=q.parameters)==null?void 0:ie.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(options[0]);
  return <SegmentFrame loadOptions={() => loadOptions(options)}>
      <SegmentAsync value={value} loadOptions={() => loadOptions(options)} onChange={item => {
      setValue(item);
      action('Segment value changed')(item.value);
    }} />
    </SegmentFrame>;
}`},(ce=(ue=q.parameters)==null?void 0:ue.docs)==null?void 0:ce.source)})}),Z.parameters=V(m({},Z.parameters),{docs:V(m({},(de=Z.parameters)==null?void 0:de.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(options[0].value);
  return <SegmentFrame loadOptions={() => loadOptions(options)}>
      <SegmentAsync value={value} loadOptions={() => loadOptions(options)} onChange={({
      value
    }) => {
      setValue(value);
      action('Segment value changed')(value);
    }} />
    </SegmentFrame>;
}`},(me=(pe=Z.parameters)==null?void 0:pe.docs)==null?void 0:me.source)})}),J.parameters=V(m({},J.parameters),{docs:V(m({},(fe=J.parameters)==null?void 0:fe.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(groupedOptions[0].options[0]);
  return <SegmentFrame loadOptions={() => loadOptions(groupedOptions)}>
      <SegmentAsync<string | number> value={value} loadOptions={() => loadOptions(groupedOptions)} onChange={item => {
      setValue(item);
      action('Segment value changed')(item.value);
    }} />
    </SegmentFrame>;
}`},(ve=(ge=J.parameters)==null?void 0:ge.docs)==null?void 0:ve.source)})}),G.parameters=V(m({},G.parameters),{docs:V(m({},(_e=G.parameters)==null?void 0:_e.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(groupedOptions[0].options[0]);
  return <SegmentFrame loadOptions={() => loadOptions(groupedOptions)}>
      <SegmentAsync allowCustomValue value={value} loadOptions={() => loadOptions(options)} onChange={item => {
      setValue(item);
      action('Segment value changed')(item.value);
    }} />
    </SegmentFrame>;
}`},(Oe=(ye=G.parameters)==null?void 0:ye.docs)==null?void 0:Oe.source)})}),X.parameters=V(m({},X.parameters),{docs:V(m({},(Se=X.parameters)==null?void 0:Se.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(groupedOptions[0].options[0].value);
  return <SegmentFrame loadOptions={() => loadOptions(groupedOptions)}>
      <SegmentAsync<string | number> Component={<CustomLabelComponent value={value} />} loadOptions={() => loadOptions(groupedOptions)} onChange={({
      value
    }) => {
      setValue(value);
      action('Segment value changed')(value);
    }} />
    </SegmentFrame>;
}`},(Ee=(he=X.parameters)==null?void 0:he.docs)==null?void 0:Ee.source)})}),$.parameters=V(m({},$.parameters),{docs:V(m({},(Ce=$.parameters)==null?void 0:Ce.docs),{source:m({originalSource:`() => {
  const stateToTextFunction = (state: AsyncState<Array<SelectableValue<string>>>) => {
    if (state.loading) {
      return "You're going too fast for me, please wait...";
    }
    if (state.error) {
      return 'Outch ! We encountered an error...';
    }
    if (!Array.isArray(state.value) || state.value.length === 0) {
      return 'It is empty :)';
    }
    return '';
  };
  const [value, setValue] = useState(options[0].value);
  return <>
      <SegmentFrame loadOptions={() => loadOptions(groupedOptions)}>
        <SegmentAsync value={value} noOptionMessageHandler={stateToTextFunction} loadOptions={() => loadOptions(groupedOptions)} onChange={({
        value
      }) => {
        setValue(value);
        action('Segment value changed')(value);
      }} />
      </SegmentFrame>
      <SegmentFrame loadOptions={() => loadOptions([])}>
        <SegmentAsync value={value} noOptionMessageHandler={stateToTextFunction} loadOptions={() => loadOptions([])} onChange={({
        value
      }) => {
        setValue(value);
        action('Segment value changed')(value);
      }} />
      </SegmentFrame>
      <SegmentFrame loadOptions={() => loadOptionsErr()}>
        <SegmentAsync value={value} noOptionMessageHandler={stateToTextFunction} loadOptions={() => loadOptionsErr()} onChange={({
        value
      }) => {
        setValue(value);
        action('Segment value changed')(value);
      }} />
      </SegmentFrame>
    </>;
}`},(Pe=(be=$.parameters)==null?void 0:be.docs)==null?void 0:Pe.source)})}),Q.parameters=V(m({},Q.parameters),{docs:V(m({},(xe=Q.parameters)==null?void 0:xe.docs),{source:m({originalSource:`() => {
  const [value, setValue] = useState(options[0]);
  return <SegmentFrame loadOptions={() => loadOptions(options)}>
      <SegmentAsync data-testid="segment-async-test" id="segment-async" value={value} loadOptions={() => loadOptions(options)} onChange={item => {
      setValue(item);
      action('Segment value changed')(item.value);
    }} />
    </SegmentFrame>;
}`},(Ve=(Ae=Q.parameters)==null?void 0:Ae.docs)==null?void 0:Ve.source)})}),j.parameters=V(m({},j.parameters),{docs:V(m({},(Ie=j.parameters)==null?void 0:Ie.docs),{source:m({originalSource:`(args: SegmentAsyncProps<string>) => {
  const [value, setValue] = useState(args.value);
  const props: SegmentAsyncProps<string> = {
    ...args,
    value,
    loadOptions: async (query = '') => {
      action('loadOptions fired')({
        query
      });
      const result = await loadOptions(options);
      if (query) {
        return result.filter(data => data.label?.includes(query));
      }
      return loadOptions(options);
    },
    onChange: ({
      value
    }) => {
      setValue(value);
      action('onChange fired')(value);
    },
    onExpandedChange: expanded => action('onExpandedChange fired')({
      expanded
    }),
    noOptionMessageHandler: state => {
      action('noOptionMessageHandler fired')(state);
      if (state.loading) {
        return 'Loading...';
      }
      if (state.error) {
        return 'Failed to load options';
      }
      if (!Array.isArray(state.value) || state.value.length === 0) {
        return 'No options found';
      }
      return '';
    }
  };
  return <SegmentSection label="Segment:">
      <SegmentAsync<string> {...props} />
    </SegmentSection>;
}`},(we=(Te=j.parameters)==null?void 0:Te.docs)==null?void 0:we.source)})})},"../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useAsyncFn.js":function(w,C,l){l.d(C,{Z:function(){return O}});var i=l("../../../yarn/cache/tslib-npm-2.6.0-4d336a6824-c01066038f.zip/node_modules/tslib/tslib.es6.mjs"),t=l("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js");function y(){var c=(0,t.useRef)(!1),d=(0,t.useCallback)(function(){return c.current},[]);return(0,t.useEffect)(function(){return c.current=!0,function(){c.current=!1}},[]),d}function O(c,d,f){d===void 0&&(d=[]),f===void 0&&(f={loading:!1});var g=(0,t.useRef)(0),S=y(),x=(0,t.useState)(f),h=x[0],E=x[1],u=(0,t.useCallback)(function(){for(var p=[],e=0;e<arguments.length;e++)p[e]=arguments[e];var n=++g.current;return h.loading||E(function(a){return(0,i.__assign)((0,i.__assign)({},a),{loading:!0})}),c.apply(void 0,p).then(function(a){return S()&&n===g.current&&E({value:a,loading:!1}),a},function(a){return S()&&n===g.current&&E({error:a,loading:!1}),a})},d);return[h,u]}}}]);
