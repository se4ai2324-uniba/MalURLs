"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[2105],{"../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/index.mjs":function(P,f,n){n.d(f,{aD:function(){return u.aD}});var u=n("../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs"),t=(...m)=>{let g=config,l=m;l.length===1&&Array.isArray(l[0])&&([l]=l),l.length!==1&&typeof l[l.length-1]!="string"&&(g={...config,...l.pop()});let _=l[0];(l.length!==1||typeof _=="string")&&(_={},l.forEach(d=>{_[d]=d}));let v={};return Object.keys(_).forEach(d=>{v[d]=action(_[d],g)}),v}},"./src/components/Forms/InlineFieldRow.tsx":function(P,f,n){n.d(f,{Z:function(){return y}});var u=n("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=Object.defineProperty,l=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,d=(c,i,e)=>i in c?g(c,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[i]=e,E=(c,i)=>{for(var e in i||(i={}))_.call(i,e)&&d(c,e,i[e]);if(l)for(var e of l(i))v.call(i,e)&&d(c,e,i[e]);return c},I=(c,i)=>{var e={};for(var s in c)_.call(c,s)&&i.indexOf(s)<0&&(e[s]=c[s]);if(c!=null&&l)for(var s of l(c))i.indexOf(s)<0&&v.call(c,s)&&(e[s]=c[s]);return e};const y=c=>{var i=c,{children:e,className:s}=i,p=I(i,["children","className"]);const b=(0,m.wW)(h);return t.createElement("div",E({className:(0,u.cx)(b.container,s)},p),e)},h=c=>({container:(0,u.iv)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:c.spacing(.5)})});try{y.displayName="InlineFieldRow",y.__docgenInfo={description:"",displayName:"InlineFieldRow",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"]={docgenInfo:y.__docgenInfo,name:"InlineFieldRow",path:"src/components/Forms/InlineFieldRow.tsx#InlineFieldRow"})}catch{}},"./src/components/Forms/InlineLabel.tsx":function(P,f,n){n.d(f,{W:function(){return c}});var u=n("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=n("./src/components/Icon/Icon.tsx"),l=n("./src/components/Tooltip/Tooltip.tsx"),_=Object.defineProperty,v=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,I=(e,s,p)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[s]=p,y=(e,s)=>{for(var p in s||(s={}))d.call(s,p)&&I(e,p,s[p]);if(v)for(var p of v(s))E.call(s,p)&&I(e,p,s[p]);return e},h=(e,s)=>{var p={};for(var b in e)d.call(e,b)&&s.indexOf(b)<0&&(p[b]=e[b]);if(e!=null&&v)for(var b of v(e))s.indexOf(b)<0&&E.call(e,b)&&(p[b]=e[b]);return p};const c=e=>{var s=e,{children:p,className:b,tooltip:B,width:j,transparent:F,interactive:C,as:z="label"}=s,K=h(s,["children","className","tooltip","width","transparent","interactive","as"]);const W=(0,m.wW)(i,F,j);return t.createElement(z,y({className:(0,u.cx)(W.label,b)},K),p,B&&t.createElement(l.u,{interactive:C,placement:"top",content:B,theme:"info"},t.createElement(g.J,{tabIndex:0,name:"info-circle",size:"sm",className:W.icon})))},i=(e,s=!1,p)=>({label:(0,u.iv)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.size.sm,backgroundColor:s?"transparent":e.colors.background.secondary,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),marginRight:e.spacing(.5),borderRadius:e.shape.radius.default,border:"none",width:p?p!=="auto"?`${8*p}px`:p:"100%",color:e.colors.text.primary}),icon:(0,u.iv)({color:e.colors.text.secondary,marginLeft:"10px",":hover":{color:e.colors.text.primary}})});try{c.displayName="InlineLabel",c.__docgenInfo={description:"",displayName:"InlineLabel",props:{tooltip:{defaultValue:null,description:`Content for the labels tooltip. If provided, an info icon with the tooltip content
will be displayed`,name:"tooltip",required:!1,type:{name:"PopoverContent"}},width:{defaultValue:null,description:"Custom width for the label",name:"width",required:!1,type:{name:'number | "auto"'}},transparent:{defaultValue:null,description:"Make labels's background transparent",name:"transparent",required:!1,type:{name:"boolean"}},interactive:{defaultValue:null,description:"Make tooltip interactive",name:"interactive",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"Controls which element the InlineLabel should be rendered into",name:"as",required:!1,type:{name:"ElementType<any>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Forms/InlineLabel.tsx#InlineLabel"]={docgenInfo:c.__docgenInfo,name:"InlineLabel",path:"src/components/Forms/InlineLabel.tsx#InlineLabel"})}catch{}},"./src/components/Segment/SegmentSection.tsx":function(P,f,n){n.d(f,{f:function(){return _}});var u=n("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),t=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),m=n("./src/themes/ThemeContext.tsx"),g=n("./src/components/Forms/InlineFieldRow.tsx"),l=n("./src/components/Forms/InlineLabel.tsx");const _=({label:d,htmlFor:E,children:I,fill:y})=>{const h=(0,m.wW)(v);return t.createElement(t.Fragment,null,t.createElement(g.Z,null,t.createElement(l.W,{htmlFor:E,width:12,className:h.label},d),I,y&&t.createElement("div",{className:h.fill},t.createElement(l.W,null,""))))},v=d=>({label:(0,u.iv)({color:d.colors.primary.text}),fill:(0,u.iv)({flexGrow:1,marginBottom:d.spacing(.5)})});try{_.displayName="SegmentSection",_.__docgenInfo={description:"Horizontal section for editor components.",displayName:"SegmentSection",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},htmlFor:{defaultValue:null,description:"",name:"htmlFor",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"",name:"fill",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentSection.tsx#SegmentSection"]={docgenInfo:_.__docgenInfo,name:"SegmentSection",path:"src/components/Segment/SegmentSection.tsx#SegmentSection"})}catch{}},"./src/components/Segment/styles.ts":function(P,f,n){n.d(f,{N:function(){return t}});var u=n("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");const t=m=>{const g="v1"in m?m.v1.palette:m.palette;return{segment:(0,u.iv)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,u.iv)({color:g.gray2}),disabled:(0,u.iv)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},"./src/components/Segment/useExpandableLabel.tsx":function(P,f,n){n.d(f,{_:function(){return g}});var u=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),t=n("./src/themes/ThemeContext.tsx"),m=n("./src/components/Button/Button.tsx");const g=(l,_)=>{const v=(0,u.useRef)(null),d=(0,t.wW)(m.gN),[E,I]=(0,u.useState)(l),[y,h]=(0,u.useState)(0),c=e=>{I(e),_&&_(e)};return[({Component:e,onClick:s,disabled:p})=>u.createElement("button",{type:"button",className:d,ref:v,disabled:p,onClick:()=>{c(!0),v&&v.current&&h(v.current.clientWidth*1.25),s?.()}},e),y,E,c]}},"./src/utils/measureText.ts":function(P,f,n){n.d(f,{AE:function(){return l},MX:function(){return v},X1:function(){return _}});let u;const t=new Map,m=500;let g="";function l(){return u||(u=document.createElement("canvas").getContext("2d")),u}function _(d,E,I=400){const y=`${I} ${E}px 'Inter'`,h=d+y,c=t.get(h);if(c)return c;const i=l();g!==y&&(i.font=g=y);const e=i.measureText(d);return t.size===m&&t.clear(),t.set(h,e),e}function v(d,E,I,y,h,c){const i=_(d,14,c),e=E/(i.width+2)*14,s=I/y,p=Math.min(s,e);return Math.min(p,h??p)}},"./src/components/Segment/SegmentInput.story.tsx":function(P,f,n){n.r(f),n.d(f,{Basic:function(){return R},BasicInput:function(){return w},BasicInputWithHtmlAttributes:function(){return T},BasicInputWithPlaceholder:function(){return D},InputWithAutoFocus:function(){return A},default:function(){return _e}});var u=n("../../.yarn/__virtual__/@storybook-addon-actions-virtual-f27b09044a/2/yarn/cache/@storybook-addon-actions-npm-7.4.5-73cd7d7430-c6b2603d31.zip/node_modules/@storybook/addon-actions/dist/index.mjs"),t=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),m=n("./src/components/Segment/SegmentSection.tsx"),g=n("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=n("../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/lib/useClickAway.js"),_=n("./src/themes/ThemeContext.tsx"),v=n("./src/utils/measureText.ts"),d=n("./src/components/Forms/InlineLabel.tsx"),E=n("./src/components/Segment/styles.ts"),I=n("./src/components/Segment/useExpandableLabel.tsx"),y=Object.defineProperty,h=Object.defineProperties,c=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(a,o,r)=>o in a?y(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r,b=(a,o)=>{for(var r in o||(o={}))e.call(o,r)&&p(a,r,o[r]);if(i)for(var r of i(o))s.call(o,r)&&p(a,r,o[r]);return a},B=(a,o)=>h(a,c(o)),j=(a,o)=>{var r={};for(var S in a)e.call(a,S)&&o.indexOf(S)<0&&(r[S]=a[S]);if(a!=null&&i)for(var S of i(a))o.indexOf(S)<0&&s.call(a,S)&&(r[S]=a[S]);return r};const F=14;function C(a){var o=a,{value:r,onChange:S,Component:L,className:ve,placeholder:ce,inputPlaceholder:ye,disabled:ie,autofocus:Se=!1,onExpandedChange:he}=o,Ee=j(o,["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"]);const ue=(0,t.useRef)(null),[M,Ie]=(0,t.useState)(r),[Oe,be]=(0,t.useState)((0,v.X1)((r||"").toString(),F).width),[Ce,,xe,U]=(0,I._)(Se,he),Y=(0,_.wW)(E.N);if((0,l.Z)(ue,()=>{U(!1),S(M)}),!xe)return t.createElement(Ce,{disabled:ie,Component:L||t.createElement(d.W,{className:(0,g.cx)(Y.segment,{[Y.queryPlaceholder]:ce!==void 0&&!M,[Y.disabled]:ie},ve)},r||ce)});const Pe=(0,g.iv)({width:`${Math.max(Oe+20,32)}px`});return t.createElement("input",B(b({},Ee),{ref:ue,autoFocus:!0,className:(0,g.cx)("gf-form gf-form-input",Pe),value:M,placeholder:ye,onChange:V=>{const{width:Re}=(0,v.X1)(V.target.value,F);be(Re),Ie(V.target.value)},onBlur:()=>{U(!1),S(M)},onKeyDown:V=>{[13,27].includes(V.keyCode)&&(U(!1),S(M))}}))}try{C.displayName="SegmentInput",C.__docgenInfo={description:"",displayName:"SegmentInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(text: string | number) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},Component:{defaultValue:null,description:"",name:"Component",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!1,type:{name:"((expanded: boolean) => void)"}},autofocus:{defaultValue:{value:"false"},description:"",name:"autofocus",required:!1,type:{name:"boolean"}},inputPlaceholder:{defaultValue:null,description:"",name:"inputPlaceholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Segment/SegmentInput.tsx#SegmentInput"]={docgenInfo:C.__docgenInfo,name:"SegmentInput",path:"src/components/Segment/SegmentInput.tsx#SegmentInput"})}catch{}var z=n("./src/components/Icon/Icon.tsx"),K=Object.defineProperty,W=Object.defineProperties,de=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,H=(a,o,r)=>o in a?K(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r,O=(a,o)=>{for(var r in o||(o={}))me.call(o,r)&&H(a,r,o[r]);if(X)for(var r of X(o))pe.call(o,r)&&H(a,r,o[r]);return a},x=(a,o)=>W(a,de(o)),Z,J,$,k,G,Q,q,ee,te,ne,ae,oe,re,se,le;const N=({children:a})=>t.createElement(t.Fragment,null,t.createElement(m.f,{label:"Segment Name"},a)),w=()=>{const[a,o]=(0,t.useState)("some text");return t.createElement(N,null,t.createElement(C,{value:a,onChange:r=>{o(r),(0,u.aD)("Segment value changed")(r)}}))},fe={title:"Data Source/Segment/SegmentInput",component:C},D=()=>{const[a,o]=(0,t.useState)("");return t.createElement(N,null,t.createElement(C,{placeholder:"add text",value:a,onChange:r=>{o(r),(0,u.aD)("Segment value changed")(r)}}))},T=()=>{const[a,o]=(0,t.useState)("some text");return t.createElement(N,null,t.createElement(C,{"data-testid":"segment-input-test",id:"segment-input",value:a,onChange:r=>{o(r),(0,u.aD)("Segment value changed")(r)}}))},ge=({initialValue:a})=>{const[o,r]=(0,t.useState)(a);return t.createElement(C,{placeholder:"add text",autofocus:!0,value:o,onChange:S=>{r(S),(0,u.aD)("Segment value changed")(S)}})},A=()=>{const[a,o]=(0,t.useState)([]);return t.createElement(N,null,a.map((r,S)=>t.createElement(r,{initialValue:"test",key:S})),t.createElement("button",{type:"button",className:"gf-form-label query-part",onClick:()=>{o([...a,ge])}},t.createElement(z.J,{name:"plus"})))},R=a=>{const[o,r]=(0,t.useState)(a.value),S=x(O({},a),{value:o,onChange:L=>{r(L),(0,u.aD)("onChange fired")({value:L})},onExpandedChange:L=>(0,u.aD)("onExpandedChange fired")({expanded:L})});return t.createElement(m.f,{label:"Segment:"},t.createElement(C,O({},S)))};R.parameters={controls:{exclude:["value","onChange","Component","className","onExpandedChange"]}},R.args={value:"Initial input value",placeholder:"Placeholder text",disabled:!1,autofocus:!1,inputPlaceholder:"Start typing..."};var _e=fe;w.parameters=x(O({},w.parameters),{docs:x(O({},(Z=w.parameters)==null?void 0:Z.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('some text');
  return <SegmentFrame>
      <SegmentInput value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},($=(J=w.parameters)==null?void 0:J.docs)==null?void 0:$.source)})}),D.parameters=x(O({},D.parameters),{docs:x(O({},(k=D.parameters)==null?void 0:k.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('');
  return <SegmentFrame>
      <SegmentInput placeholder="add text" value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},(Q=(G=D.parameters)==null?void 0:G.docs)==null?void 0:Q.source)})}),T.parameters=x(O({},T.parameters),{docs:x(O({},(q=T.parameters)==null?void 0:q.docs),{source:O({originalSource:`() => {
  const [value, setValue] = useState<string | number>('some text');
  return <SegmentFrame>
      <SegmentInput data-testid="segment-input-test" id="segment-input" value={value} onChange={text => {
      setValue(text);
      action('Segment value changed')(text);
    }} />
    </SegmentFrame>;
}`},(te=(ee=T.parameters)==null?void 0:ee.docs)==null?void 0:te.source)})}),A.parameters=x(O({},A.parameters),{docs:x(O({},(ne=A.parameters)==null?void 0:ne.docs),{source:O({originalSource:`() => {
  const [inputComponents, setInputComponents] = useState<Array<(props: InputComponentProps) => JSX.Element>>([]);
  return <SegmentFrame>
      {inputComponents.map((InputComponent, i) => <InputComponent initialValue="test" key={i} />)}
      <button type="button" className="gf-form-label query-part" onClick={() => {
      setInputComponents([...inputComponents, InputComponent]);
    }}>
        <Icon name="plus" />
      </button>
    </SegmentFrame>;
}`},(oe=(ae=A.parameters)==null?void 0:ae.docs)==null?void 0:oe.source)})}),R.parameters=x(O({},R.parameters),{docs:x(O({},(re=R.parameters)==null?void 0:re.docs),{source:O({originalSource:`(args: SegmentInputProps) => {
  const [value, setValue] = useState(args.value);
  const props: SegmentInputProps = {
    ...args,
    value,
    onChange: value => {
      setValue(value);
      action('onChange fired')({
        value
      });
    },
    onExpandedChange: expanded => action('onExpandedChange fired')({
      expanded
    })
  };
  return <SegmentSection label="Segment:">
      <SegmentInput {...props} />
    </SegmentSection>;
}`},(le=(se=R.parameters)==null?void 0:se.docs)==null?void 0:le.source)})})},"../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/lib/misc/util.js":function(P,f){Object.defineProperty(f,"__esModule",{value:!0}),f.isNavigator=f.isBrowser=f.off=f.on=f.noop=void 0;var n=function(){};f.noop=n;function u(m){for(var g=[],l=1;l<arguments.length;l++)g[l-1]=arguments[l];m&&m.addEventListener&&m.addEventListener.apply(m,g)}f.on=u;function t(m){for(var g=[],l=1;l<arguments.length;l++)g[l-1]=arguments[l];m&&m.removeEventListener&&m.removeEventListener.apply(m,g)}f.off=t,f.isBrowser=typeof window<"u",f.isNavigator=typeof navigator<"u"},"../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/lib/useClickAway.js":function(P,f,n){var u;u={value:!0};var t=n("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),m=n("../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/lib/misc/util.js"),g=["mousedown","touchstart"],l=function(_,v,d){d===void 0&&(d=g);var E=t.useRef(v);t.useEffect(function(){E.current=v},[v]),t.useEffect(function(){for(var I=function(i){var e=_.current;e&&!e.contains(i.target)&&E.current(i)},y=0,h=d;y<h.length;y++){var c=h[y];m.on(document,c,I)}return function(){for(var i=0,e=d;i<e.length;i++){var s=e[i];m.off(document,s,I)}}},[d,_])};f.Z=l}}]);
