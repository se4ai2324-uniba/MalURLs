"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[2439],{"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts":function(Ie,ge,O){O.d(ge,{sV:function(){return Ue},fu:function(){return pe},LI:function(){return be},aY:function(){return Be},z4:function(){return Ce},aK:function(){return Ze},og:function(){return Ye}});var I=O("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),w=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/moment_wrapper.ts"),A=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts");const J=(l,f=!1)=>{const P=l.values;switch(l.type){case A.fS.number:return X(P,f);case A.fS.string:return le(P,f);case A.fS.boolean:return $(P,f);case A.fS.time:return typeof l.values[0]=="number"?Z(P,f):V(P,f);default:return ve(f)}},z=(l,f)=>{if(!l||!f)return y(l,f);if((0,I.isNumber)(l)&&(0,I.isNumber)(f))return de(l,f);if((0,w.D2)(l)&&(0,w.D2)(f)){if((0,w.CQ)(l).isBefore(f))return-1;if((0,w.CQ)(f).isBefore(l))return 1}return 0},de=(l,f)=>l-f,j=(l,f)=>!l||!f?y(l,f):l.localeCompare(f),fe=(l,f)=>y(l,f),y=(l,f)=>!l&&f?1:l&&!f?-1:0,Z=(l,f)=>{let P=f?-1:1;return(R,G)=>P*(l[R]-l[G])},V=(l,f)=>(P,R)=>{const G=l[P],q=l[R];return f?z(q,G):z(G,q)},$=(l,f)=>(P,R)=>{const G=l[P],q=l[R];return f?fe(q,G):fe(G,q)},X=(l,f)=>(P,R)=>{const G=l[P],q=l[R];return f?de(q,G):de(G,q)},le=(l,f)=>(P,R)=>{const G=l[P],q=l[R];return f?j(q,G):j(G,q)},ve=l=>(f,P)=>l?de(P,f):de(f,P);var xe=Object.defineProperty,Se=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,m=(l,f,P)=>f in l?xe(l,f,{enumerable:!0,configurable:!0,writable:!0,value:P}):l[f]=P,v=(l,f)=>{for(var P in f||(f={}))_e.call(f,P)&&m(l,P,f[P]);if(oe)for(var P of oe(f))x.call(f,P)&&m(l,P,f[P]);return l},M=(l,f)=>Se(l,ne(f)),Q=(l,f)=>{var P={};for(var R in l)_e.call(l,R)&&f.indexOf(R)<0&&(P[R]=l[R]);if(l!=null&&oe)for(var R of oe(l))f.indexOf(R)<0&&x.call(l,R)&&(P[R]=l[R]);return P};function N(l){const f=l.columns.map(P=>{const R=P,{text:G,type:q}=R,ue=Q(R,["text","type"]);return{name:G?.length?G:P,config:ue||{},values:[],type:q&&Object.values(FieldType).includes(q)?q:FieldType.other}});if(!isArray(l.rows))throw new Error(`Expected table rows to be array, got ${typeof l.rows}.`);for(const P of l.rows)for(let R=0;R<f.length;R++)f[R].values.push(P[R]);for(const P of f)if(P.type===FieldType.other){const R=pe(P);R&&(P.type=R)}return{fields:f,refId:l.refId,meta:l.meta,name:l.name,length:l.rows.length}}function K(l){const f=[],P=[],R=l.datapoints||l.points;for(const q of R)P.push(q[0]),f.push(q[1]);const G=[{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{},values:f},{name:TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{unit:l.unit},values:P,labels:l.tags}];return l.title&&(G[1].config.displayNameFromDS=l.title),{name:l.target||l.name,refId:l.refId,meta:l.meta,fields:G,length:P.length}}function W(l){const f=[],P=[];for(let R=0;R<l.data.length;R++){const G=l.data[R];f.push(G[1]),P.push(G[0])}return{name:l.label,fields:[{name:l.label||TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{},values:f},{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{unit:"dateTimeAsIso"},values:P}],length:f.length}}function H(l){const f=[{name:l.target,type:FieldType.other,labels:l.tags,config:{unit:l.unit,filterable:l.filterable},values:[]}];for(const P of l.datapoints)f[0].values.push(P);return{name:l.target,refId:l.target,meta:{json:!0},fields:f,length:l.datapoints.length}}const ae=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function Y(l,f){return l&&(l=l.toLowerCase(),l==="date"||l==="time")?FieldType.time:be(f)}function ee(l){return l instanceof Date||isDateTime(l)?FieldType.time:isNumber(l)?FieldType.number:isString(l)?FieldType.string:isBoolean(l)?FieldType.boolean:FieldType.other}function be(l){return l instanceof Date||(0,w.v9)(l)?A.fS.time:(0,I.isNumber)(l)?A.fS.number:(0,I.isString)(l)?ae.test(l)?A.fS.number:l==="true"||l==="TRUE"||l==="True"||l==="false"||l==="FALSE"||l==="False"?A.fS.boolean:A.fS.string:(0,I.isBoolean)(l)?A.fS.boolean:A.fS.other}function pe(l){if(l.name){const f=l.name.toLowerCase();if(f==="date"||f==="time")return A.fS.time}for(let f=0;f<l.values.length;f++){const P=l.values[f];if(P!=null)return be(P)}}const Pe=(l,f=!1)=>{for(const P of l.fields)if(!P.type||P.type===FieldType.other||f)return M(v({},l),{fields:l.fields.map(R=>R.type&&R.type!==FieldType.other&&!f?R:M(v({},R),{type:pe(R)||FieldType.other}))});return l},Me=l=>!!(l&&l.hasOwnProperty("columns")),Be=l=>!!(l&&l.hasOwnProperty("fields")),Ce=l=>!!(Be(l)&&l.hasOwnProperty("value"));function ze(l){var f,P;if("fields"in l)return"length"in l&&((P=(f=l.fields[0])==null?void 0:f.values)!=null&&P.get)?l:Ge(l);if(l.hasOwnProperty("type")&&l.type==="docs")return H(l);if(l.hasOwnProperty("datapoints")||l.hasOwnProperty("points"))return K(l);if(l.hasOwnProperty("data"))return l.hasOwnProperty("schema")?dataFrameFromJSON(l):W(l);if(l.hasOwnProperty("columns"))return N(l);if(Array.isArray(l))return arrayToDataFrame(l);throw console.warn("Can not convert",l),new Error("Unsupported data format")}const We=l=>{const{fields:f}=l,P=l.length,R=[];if(f.length===2){const{timeField:G,timeIndex:q}=Ue(l);if(G){const Te=f[q===0?1:0],se=f[q];for(let Ae=0;Ae<P;Ae++)R.push([Te.values[Ae],se.values[Ae]]);return{alias:l.name,target:getFieldDisplayName(Te,l),datapoints:R,unit:f[0].config?f[0].config.unit:void 0,refId:l.refId,meta:l.meta}}}for(let G=0;G<P;G++){const q=[];for(let ue=0;ue<f.length;ue++)q.push(f[ue].values[G]);R.push(q)}return l.meta&&l.meta.json?{alias:f[0].name||l.name,target:f[0].name||l.name,datapoints:f[0].values,filterable:f[0].config?f[0].config.filterable:void 0,type:"docs"}:{columns:f.map(G=>{const{name:q,config:ue}=G;if(ue){const Te=Q(ue,[]);return Te.text=q,Te}return{text:q}}),type:"table",refId:l.refId,meta:l.meta,rows:R}};function Ze(l,f,P=!1){const R=l.fields[f];if(!R)return l;const G=[];for(let ue=0;ue<l.length;ue++)G.push(ue);const q=J(R,P);return G.sort(q),M(v({},l),{fields:l.fields.map(ue=>{const Te=M(v({},ue),{values:ue.values.map((Ae,Qe)=>ue.values[G[Qe]])}),{nanos:se}=ue;return se!==void 0&&(Te.nanos=se.map((Ae,Qe)=>se[G[Qe]])),Te})})}function qe(l){return M(v({},l),{fields:l.fields.map(f=>{const P=[...f.values];P.reverse();const R=M(v({},f),{values:P}),{nanos:G}=f;if(G!==void 0){const q=[...G];q.reverse(),R.nanos=q}return R})})}function lt(l,f){const P=[];for(const R of l.fields)P.push(R.values[f]);return P}function Ye(l){return Je(l)}function Je(l,f){return{fields:(f?l.fields.filter(f):l.fields).map(G=>{let q=G.values;return{name:G.name,type:G.type,config:G.config,values:q,labels:G.labels}}),refId:l.refId,meta:l.meta,name:l.name}}const Ue=l=>{for(let f=0;f<l.fields.length;f++)if(l.fields[f].type===A.fS.time)return{timeField:l.fields[f],timeIndex:f};return{}};function me(l){const f=Pe(ze(l));if(f.fields&&f.fields.length)for(const P of f.fields)P.state=null;return f}function Xe(l){return!l||!isArray(l)?[]:l.map(f=>me(f))}function Ve(l,f){const{series:P,annotations:R}=l;if(l.state===LoadingState.Loading&&P.length===0)return f||(f=l),M(v({},f),{state:LoadingState.Loading,request:l.request});const G=performance.now(),q=P.map(se=>me(se)),ue=Xe(R),Te=performance.now();return M(v({},l),{series:q,annotations:ue,timings:{dataProcessingTime:Te-G}})}function Ge(l){let f=0;const P=l.fields.map((R,G)=>{var q;const ue=R,{state:Te}=ue,se=Q(ue,["state"]);return se.name||(se.name=`Field ${G+1}`),se.config||(se.config={}),se.values?se.values.length>f&&(f=se.values.length):se.values=new Array(f),se.type||(se.type=(q=pe(se))!=null?q:FieldType.other),se});return M(v({},l),{fields:P,length:f})}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts":function(Ie,ge,O){O.d(ge,{$8:function(){return _e},Pr:function(){return ne},RQ:function(){return ve},Vs:function(){return xe},nA:function(){return Se}});var I=O("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),w=O.n(I),A=O("../../../yarn/cache/moment-timezone-npm-0.5.43-1304d8602a-8075c897ed.zip/node_modules/moment-timezone/index.js"),J=O.n(A),z=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/common.ts"),de=Object.defineProperty,j=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,$=(N,K,W)=>K in N?de(N,K,{enumerable:!0,configurable:!0,writable:!0,value:W}):N[K]=W,X=(N,K)=>{for(var W in K||(K={}))Z.call(K,W)&&$(N,W,K[W]);if(y)for(var W of y(K))V.call(K,W)&&$(N,W,K[W]);return N},le=(N,K)=>j(N,fe(K)),ve=(N=>(N.default="",N.localBrowserTime="browser",N.utc="utc",N))(ve||{});const xe=N=>{switch((0,z.Z)({timeZone:N})){case"browser":return"Local browser time";case"utc":return"UTC";default:return N}},Se=N=>J().tz.zone(N),ne=(N,K)=>{const W=x(N,K);return W||v(N,K)},oe=(0,I.memoize)((N=!1)=>{const K=[];return N===!0?K.push("","browser","utc"):N&&K.push(...N),J().tz.names().reduce((W,H)=>{const ae=Q[H];return!Array.isArray(ae)||ae.length===0||W.push(H),W},K)}),_e=(0,I.memoize)((N=!1)=>{const W=oe(N).reduce((H,ae)=>{var Y,ee;const be=ae.indexOf("/");if(be===-1){const Pe="";return H[Pe]=(Y=H[Pe])!=null?Y:[],H[Pe].push(ae),H}const pe=ae.slice(0,be);return H[pe]=(ee=H[pe])!=null?ee:[],H[pe].push(ae),H},{});return Object.keys(W).map(H=>({name:H,zones:W[H]}))}),x=(N,K)=>{var W,H,ae,Y;switch(N){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:N,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const ee=(0,z.Z)(),pe=ee==="browser"||ee==="utc"?x(ee,K):v(ee,K);return le(X({countries:(W=Q[ee])!=null?W:[],abbreviation:"",offsetInMins:0},pe),{ianaName:(H=pe?.ianaName)!=null?H:"",name:"Default",zone:N})}case"browser":{const ee=J().tz.guess(!0),be=v(ee,K);return le(X({countries:(ae=Q[ee])!=null?ae:[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset()},be),{name:"Browser Time",ianaName:(Y=be?.ianaName)!=null?Y:"",zone:N})}default:return}},m=N=>/^(\+|\-).+/.test(N)?"":N,v=(N,K)=>{var W;const H=J().tz.zone(N);if(H)return{name:N,ianaName:H.name,zone:N,countries:(W=Q[N])!=null?W:[],abbreviation:m(H.abbr(K)),offsetInMins:H.utcOffset(K)}},M={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},Q=(()=>J().tz.countries().reduce((N,K)=>J().tz.zonesForCountry(K).reduce((H,ae)=>{H[ae]||(H[ae]=[]);const Y=M[K];return Y&&H[ae].push({code:K,name:Y}),H},N),{}))()},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/common.ts":function(Ie,ge,O){O.d(ge,{es:function(){return w},xH:function(){return A}});var I=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/types.ts");class w extends I.R{}w.type="data-hover";class A extends I.m{}A.type="data-hover-clear";class J extends I.R{}J.type="data-select";class z extends I.R{}z.type="annotation-event";class de extends I.R{}de.type="dashboard-loaded";class j extends I.m{}j.type="datasource-updated-successfully";class fe extends I.m{}fe.type="datasource-test-succeeded";class y extends I.m{}y.type="datasource-test-failed"},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/types.ts":function(Ie,ge,O){O.d(ge,{R:function(){return w},m:function(){return I}});class I{constructor(){this.type=this.__proto__.constructor.type}}class w extends I{constructor(J){super(),this.payload=J}}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts":function(Ie,ge,O){O.d(ge,{CZ:function(){return Se}});var I=O("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),w=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),A=Object.defineProperty,J=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,j=(x,m,v)=>m in x?A(x,m,{enumerable:!0,configurable:!0,writable:!0,value:v}):x[m]=v,fe=(x,m)=>{for(var v in m||(m={}))z.call(m,v)&&j(x,v,m[v]);if(J)for(var v of J(m))de.call(m,v)&&j(x,v,m[v]);return x};const y=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function Z(x){const m={};return x.replace(y,(v,M,Q,N)=>(m[M]=N,"")),m}function V(x){return x.reduce((m,v)=>{if(!v)throw new Error("Need parsed labels to find common labels.");return Object.keys(v).forEach(M=>{(m[M]===void 0||m[M]!==v[M])&&delete m[M]}),Object.keys(m).forEach(M=>{v[M]===void 0&&delete m[M]}),m},fe({},x[0]))}function $(x,m){const v=fe({},x);return Object.keys(m).forEach(M=>{delete v[M]}),v}function X(x,m){if(!x)return!0;for(const[v,M]of Object.entries(x))if(!m||m[v]!==M)return!1;return!0}function le(x,m="",v){if(!x||Object.keys(x).length===0)return m;const Q=Object.keys(x).sort().map(N=>`${N}="${x[N]}"`).join(", ");return v?Q:["{",Q,"}"].join("")}function ve(x,m){if(x.name)return x.name;const v=[];for(const M of x.fields)if(M.type!==FieldType.time){if(v.length>1)break;v.push(Se(M,x))}return v.length===1?v[0]:m===void 0?x.fields.filter(M=>M.type!==FieldType.time).map(M=>Se(M,x)).join(", "):x.refId?`Series (${x.refId})`:`Series (${m})`}function xe(x){x.forEach(m=>{m.fields.forEach(v=>{Se(v,m,x)})})}function Se(x,m,v){var M,Q;const N=(M=x.state)==null?void 0:M.displayName,K=!!(v&&v.length>1);if(N&&K===((Q=x.state)==null?void 0:Q.multipleFrames))return N;const W=ne(x,m,v);return x.state=x.state||{},x.state.displayName=W,x.state.multipleFrames=K,W}function ne(x,m,v){var M,Q,N,K,W;const H=((M=x.config)==null?void 0:M.displayName)&&((Q=x.config)==null?void 0:Q.displayName.length),ae=!!((K=(N=m?.meta)==null?void 0:N.timeCompare)!=null&&K.isTimeShiftQuery);let Y=H?x.config.displayName:x.name;if(H)return ae?`${Y} (comparison)`:Y;if(m&&((W=x.config)!=null&&W.displayNameFromDS))return ae?`${x.config.displayNameFromDS} (comparison)`:x.config.displayNameFromDS;if(x.type===w.fS.time&&!x.labels)return Y??w.Ls;let ee=[],be=!1;if(v&&v.length>1){for(let Me=1;Me<v.length;Me++)if(v[Me].name!==v[Me-1].name){be=!0;break}}let pe=!1,Pe=!1;if(be&&m?.name&&(ee.push(m.name),pe=!0),x.name&&x.name!==w.M5&&ee.push(x.name),x.labels&&m){let Me=_e(v??[m]);if(Me)x.labels[Me]&&(ee.push(x.labels[Me]),Pe=!0);else{let Be=le(x.labels);Be&&(ee.push(Be),Pe=!0)}}return m&&!pe&&!Pe&&x.name===w.M5&&m.name&&m.name.length>0&&(ee.push(m.name),pe=!0),ee.length?Y=ee.join(" "):x.name?Y=x.name:Y=w.M5,Y===x.name&&(Y=oe(x,m)),ae&&(Y=`${Y} (comparison)`),Y}function oe(x,m){let v=0,M=!1;if(m)for(let Q=0;Q<m.fields.length;Q++){const N=m.fields[Q];if((0,I.isEqual)(x,N)){if(M=!0,v>0){v++;break}}else if(x.name===N.name&&(v++,M))break}return v?`${x.name} ${v}`:x.name}function _e(x){let m=null;for(let v=0;v<x.length;v++){const M=x[v];for(const Q of M.fields)if(Q.labels){for(const N in Q.labels)if(m===null)m=N;else if(N!==m)return null}}return m}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers.ts":function(Ie,ge,O){O.d(ge,{Ls:function(){return He},Ac:function(){return et},sq:function(){return tt},b9:function(){return rt}});var I=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/utils/Registry.ts"),w=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),A=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts");const J={id:A.mi.byType,name:"Field Type",description:"match based on the field type",defaultOptions:w.fS.number,get:u=>(h,S,C)=>u===h.type,getOptionsDisplayText:u=>`Field type: ${u}`},z={id:A.mi.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:u=>(h,S,C)=>u.has(h.type),getOptionsDisplayText:u=>`Field types: ${[...u].join(" | ")}`},de={id:A.mi.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>J.get(w.fS.number),getOptionsDisplayText:()=>"Numeric Fields"},j={id:A.mi.time,name:"Time Fields",description:"Fields with type time",get:()=>J.get(w.fS.time),getOptionsDisplayText:()=>"Time Fields"};function fe(){return[J,z,de,j]}var y=O("../grafana-schema/src/common/common.gen.ts"),Z=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/fieldReducer.ts");function V(u,h,S){switch((u==null||S==null)&&(u==null&&(u="null"),S==null&&(S="null"),(h===y.Bd.GTE||h===y.Bd.LTE)&&(h=y.Bd.EQ)),h){case y.Bd.EQ:return`${u}`==`${S}`;case y.Bd.NEQ:return`${u}`!=`${S}`;case y.Bd.GT:return u>S;case y.Bd.GTE:return u>=S;case y.Bd.LT:return u<S;case y.Bd.LTE:return u<=S;default:return!1}}function $(u){return u===Z.gz.allIsNull||u===Z.gz.allIsZero}const X={id:A.mi.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:Z.gz.allIsZero,op:y.Bd.GTE,value:0},get:u=>{if(!u||!u.reducer)return()=>!1;let{reducer:h,op:S,value:C}=u;const re=$(h);return S||(S=y.Bd.EQ),(ye,ie,Le)=>{const Ne=(0,Z.Kx)({field:ye,reducers:[h]})[h];return re?!!Ne:V(Ne,S,C)}},getOptionsDisplayText:u=>`By value (${u.reducer})`};var le=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldState.ts"),ve=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/text/string.ts"),xe=(u=>(u.exclude="exclude",u.include="include",u))(xe||{});const Se={id:A.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:u=>{const S=oe(new Set([u]));return(C,re,ye)=>u===C.name||u===(0,le.CZ)(C,re,ye)||!!(S&&S(C,re,ye))},getOptionsDisplayText:u=>`Field name: ${u}`},ne={id:A.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:u=>{const{names:h,mode:S="include"}=u,C=new Set(h??[]),re=oe(C),ye=(ie,Le,Ne)=>C.has(ie.name)||C.has((0,le.CZ)(ie,Le,Ne))||!!(re&&re(ie,Le,Ne));return S==="exclude"?(ie,Le,Ne)=>!ye(ie,Le,Ne):ye},getOptionsDisplayText:u=>{const{names:h,mode:S}=u,C=(h??[]).join(", ");return S==="exclude"?`All except: ${C}`:`All of: ${C}`}};function oe(u){var h,S,C;let re;return((C=(S=(h=window?.grafanaBootData)==null?void 0:h.settings)==null?void 0:S.featureToggles)==null?void 0:C.dataplaneFrontendFallback)&&(u.has(w.M5)?re=(ie,Le)=>{var Ne;return!!ie.labels&&((Ne=ie.labels)==null?void 0:Ne.__name__)===ie.name}:(u.has("Time")||u.has("time"))&&(re=(ie,Le)=>{var Ne;return((Ne=Le.meta)==null?void 0:Ne.typeVersion)==null&&ie.type===w.fS.time})),re}const _e={id:A.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:u=>{const h=v(u);return(S,C,re)=>{const ye=(0,le.CZ)(S,C,re);return!!h&&h.test(ye)}},getOptionsDisplayText:u=>`Field name by pattern: ${u}`},x={id:A.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:u=>(h,S,C)=>S.refId===u,getOptionsDisplayText:u=>`Math all fields returned by query with reference ID: ${u}`},m={id:A.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:u=>{var h;const S=_e.get(u?.pattern||""),C=ne.get({mode:"include",names:(h=u?.names)!=null?h:[]});return(re,ye,ie)=>C(re,ye,ie)||S(re,ye,ie)},getOptionsDisplayText:u=>{var h,S,C;const re=(h=u?.pattern)!=null?h:"",ye=(C=(S=u?.names)==null?void 0:S.join(","))!=null?C:"";return`Field name by pattern: ${re} or names: ${ye}`}},v=u=>{if(u)try{return(0,ve.jO)(u)}catch(h){console.error(h);return}},M={id:A.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:u=>{const h=(0,ve.jO)(u);return S=>h.test(S.name||"")},getOptionsDisplayText:u=>`Frame name: ${u}`};function Q(){return[Se,_e,ne,m,x]}function N(){return[M]}const K={id:A.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:u=>{const h=u.map(S=>tt(S));return(S,C,re)=>{for(const ye of h)if(ye(S,C,re))return!0;return!1}},getOptionsDisplayText:u=>{let h="";for(const S of u){h.length>0&&(h+=" OR ");const C=He.get(S.id);h+=C.getOptionsDisplayText?C.getOptionsDisplayText(S):C.name}return h}},W={id:A.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:u=>{const h=u.map(S=>rt(S));return S=>{for(const C of h)if(C(S))return!0;return!1}},getOptionsDisplayText:u=>{let h="";for(const S of u){h.length>0&&(h+=" OR ");const C=et.get(S.id);h+=C.getOptionsDisplayText?C.getOptionsDisplayText(S):C.name}return h}},H={id:A.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:u=>{const h=u.map(S=>tt(S));return(S,C,re)=>{for(const ye of h)if(!ye(S,C,re))return!1;return!0}},getOptionsDisplayText:u=>{let h="";for(const S of u){h.length>0&&(h+=" AND ");const C=He.get(S.id);h+=C.getOptionsDisplayText?C.getOptionsDisplayText(S):C.name}return h}},ae={id:A.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:u=>{const h=u.map(S=>rt(S));return S=>{for(const C of h)if(!C(S))return!1;return!0}},getOptionsDisplayText:u=>{let h="";for(const S of u){h.length>0&&(h+=" AND ");const C=et.get(S.id);h+=C.getOptionsDisplayText?C.getOptionsDisplayText(S):C.name}return h}},Y={id:A.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:u=>{const h=tt(u);return(S,C,re)=>!h(S,C,re)},getOptionsDisplayText:u=>{const h=He.get(u.id);return"NOT "+(h.getOptionsDisplayText?h.getOptionsDisplayText(u.options):h.name)}},ee={id:A.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:u=>{const h=rt(u);return S=>!h(S)},getOptionsDisplayText:u=>{const h=et.get(u.id);return"NOT "+(h.getOptionsDisplayText?h.getOptionsDisplayText(u.options):h.name)}},be=u=>!0,pe=u=>!0,Pe=u=>!1,Me=u=>u.type!==FieldType.time,Be=u=>!1,Ce={id:A.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:u=>be,getOptionsDisplayText:u=>"Always"},ze={id:A.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:u=>pe,getOptionsDisplayText:u=>"Always"},We={id:A.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:u=>Pe,getOptionsDisplayText:u=>"Never"},Ze={id:A.Ff.neverMatch,name:"No Frames",description:"Never Match",get:u=>Be,getOptionsDisplayText:u=>"Never"};function qe(){return[K,H,Y,Ce,We]}function lt(){return[W,ae,ee,ze,Ze]}const Ye={id:A.E4.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:u=>{const h=(0,ve.jO)(u);return S=>h.test(S.refId||"")},getOptionsDisplayText:u=>`RefID: ${u}`};function Je(){return[Ye]}const Ue={id:A.mi.first,name:"First Field",description:"The first field in the frame",get:u=>(h,S,C)=>h===S.fields[0],getOptionsDisplayText:()=>"First field"},me={id:A.mi.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:u=>(h,S,C)=>h.type===w.fS.time&&h===S.fields.find(re=>re.type===w.fS.time),getOptionsDisplayText:()=>"First time field"};function Xe(){return[Ue,me]}const Ve={id:A.mE.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:u=>(h,S)=>S.values[h]==u.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},Ge={id:A.mE.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:u=>(h,S)=>S.values[h]!=u.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},l=()=>[Ve,Ge],f={id:A.mE.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(u,h)=>h.values[u]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},P={id:A.mE.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(u,h)=>h.values[u]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},R=()=>[f,P],G={id:A.mE.greater,name:"Is greater",description:"Match when field value is greater than option.",get:u=>(h,S)=>{const C=S.values[h];return isNaN(C)?!1:C>u.value},getOptionsDisplayText:u=>`Matches all rows where field value is greater than: ${u.value}.`,isApplicable:u=>u.type===w.fS.number,getDefaultOptions:()=>({value:0})},q={id:A.mE.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:u=>(h,S)=>{const C=S.values[h];return isNaN(C)?!1:C>=u.value},getOptionsDisplayText:u=>`Matches all rows where field value is greater than or equal to: ${u.value}.`,isApplicable:u=>u.type===w.fS.number,getDefaultOptions:()=>({value:0})},ue={id:A.mE.lower,name:"Is lower",description:"Match when field value is lower than option.",get:u=>(h,S)=>{const C=S.values[h];return isNaN(C)?!1:C<u.value},getOptionsDisplayText:u=>`Matches all rows where field value is lower than: ${u.value}.`,isApplicable:u=>u.type===w.fS.number,getDefaultOptions:()=>({value:0})},Te={id:A.mE.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:u=>(h,S)=>{const C=S.values[h];return isNaN(C)?!1:C<=u.value},getOptionsDisplayText:u=>`Matches all rows where field value is lower or equal than: ${u.value}.`,isApplicable:u=>u.type===w.fS.number,getDefaultOptions:()=>({value:0})},se=()=>[G,q,ue,Te],Ae={id:A.mE.between,name:"Is between",description:"Match when field value is between given option values.",get:u=>(h,S)=>{const C=S.values[h];return isNaN(C)?!1:C>u.from&&C<u.to},getOptionsDisplayText:u=>`Matches all rows where field value is between ${u.from} and ${u.to}.`,isApplicable:u=>u.type===w.fS.number,getDefaultOptions:()=>({from:0,to:100})},Qe=()=>[Ae],yt={id:A.mE.regex,name:"Regex",description:"Match when field value is matching regex.",get:u=>{const h=new RegExp(u.value);return(S,C)=>{const re=C.values[S];return h.test(re)}},getOptionsDisplayText:u=>`Matches all rows where field value is matching regex: ${u.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},wt=()=>[yt],He=new I.B(()=>[...qe(),...fe(),...Q(),...Xe(),X]),et=new I.B(()=>[...lt(),...N(),...Je()]),dt=new I.B(()=>[...R(),...se(),...l(),...Qe(),...wt()]);function tt(u){const h=He.get(u.id);if(!h)throw new Error("Unknown field matcher: "+u.id);return h.get(u.options)}function rt(u){const h=et.get(u.id);if(!h)throw new Error("Unknown frame matcher: "+u.id);return h.get(u.options)}function Rt(u){const h=dt.get(u.id);if(!h)throw new Error("Unknown value matcher: "+u.id);return h.get(u.options)}},"../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts":function(Ie,ge,O){O.d(ge,{E4:function(){return A},Ff:function(){return I},mE:function(){return J},mi:function(){return w}});var I=(z=>(z.anyMatch="anyMatch",z.allMatch="allMatch",z.invertMatch="invertMatch",z.alwaysMatch="alwaysMatch",z.neverMatch="neverMatch",z))(I||{}),w=(z=>(z.numeric="numeric",z.time="time",z.first="first",z.firstTimeField="firstTimeField",z.byType="byType",z.byTypes="byTypes",z.byName="byName",z.byNames="byNames",z.byRegexp="byRegexp",z.byRegexpOrNames="byRegexpOrNames",z.byFrameRefID="byFrameRefID",z.byValue="byValue",z))(w||{}),A=(z=>(z.byName="byName",z.byRefId="byRefId",z.byIndex="byIndex",z))(A||{}),J=(z=>(z.regex="regex",z.isNull="isNull",z.isNotNull="isNotNull",z.greater="greater",z.greaterOrEqual="greaterOrEqual",z.lower="lower",z.lowerOrEqual="lowerOrEqual",z.equal="equal",z.notEqual="notEqual",z.between="between",z))(J||{})},"./src/components/CustomScrollbar/CustomScrollbar.tsx":function(Ie,ge,O){O.d(ge,{$:function(){return oe},Z:function(){return _e}});var I=O("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),w=O("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),A=O("../../.yarn/__virtual__/react-custom-scrollbars-2-virtual-e2928ff0cf/2/yarn/cache/react-custom-scrollbars-2-npm-4.5.0-420f40d266-b264629c0b.zip/node_modules/react-custom-scrollbars-2/lib/index.js"),J=O("./src/themes/ThemeContext.tsx"),z=O("../../../yarn/cache/classnames-npm-2.3.2-d2fdae468d-2c62199789.zip/node_modules/classnames/index.js"),de=O.n(z),j=O("./src/components/Icon/Icon.tsx");const fe=({children:m})=>{const[v,M]=(0,w.useState)(!1),[Q,N]=(0,w.useState)(!1),K=(0,w.useRef)(null),W=(0,w.useRef)(null),H=(0,J.wW)(y);return(0,w.useEffect)(()=>{const ae=new IntersectionObserver(Y=>{Y.forEach(ee=>{ee.target===K.current?M(!ee.isIntersecting):ee.target===W.current&&N(!ee.isIntersecting)})});return[K,W].forEach(Y=>{Y.current&&ae.observe(Y.current)}),()=>ae.disconnect()},[]),w.createElement(w.Fragment,null,w.createElement("div",{className:(0,I.cx)(H.scrollIndicator,H.scrollTopIndicator,{[H.scrollIndicatorVisible]:v})},w.createElement(j.J,{className:de()(H.scrollIcon,H.scrollTopIcon),name:"angle-up"})),w.createElement("div",{className:H.scrollContent},w.createElement("div",{ref:K}),m,w.createElement("div",{ref:W})),w.createElement("div",{className:(0,I.cx)(H.scrollIndicator,H.scrollBottomIndicator,{[H.scrollIndicatorVisible]:Q})},w.createElement(j.J,{className:de()(H.scrollIcon,H.scrollBottomIcon),name:"angle-down"})))},y=m=>({scrollContent:(0,I.iv)({flex:1,position:"relative"}),scrollIndicator:(0,I.iv)({height:m.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:m.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,I.iv)({background:`linear-gradient(0deg, transparent, ${m.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,I.iv)({background:`linear-gradient(180deg, transparent, ${m.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,I.iv)({opacity:1}),scrollIcon:(0,I.iv)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,I.iv)({top:0}),scrollBottomIcon:(0,I.iv)({bottom:0})});try{fe.displayName="ScrollIndicators",fe.__docgenInfo={description:"",displayName:"ScrollIndicators",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/CustomScrollbar/ScrollIndicators.tsx#ScrollIndicators"]={docgenInfo:fe.__docgenInfo,name:"ScrollIndicators",path:"src/components/CustomScrollbar/ScrollIndicators.tsx#ScrollIndicators"})}catch{}var Z=Object.defineProperty,V=Object.defineProperties,$=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,xe=(m,v,M)=>v in m?Z(m,v,{enumerable:!0,configurable:!0,writable:!0,value:M}):m[v]=M,Se=(m,v)=>{for(var M in v||(v={}))le.call(v,M)&&xe(m,M,v[M]);if(X)for(var M of X(v))ve.call(v,M)&&xe(m,M,v[M]);return m},ne=(m,v)=>V(m,$(v));const oe=({autoHide:m=!1,autoHideTimeout:v=200,setScrollTop:M,className:Q,testId:N,autoHeightMin:K="0",autoHeightMax:W="100%",hideTracksWhenNotNeeded:H=!1,hideHorizontalTrack:ae,hideVerticalTrack:Y,scrollRefCallback:ee,showScrollIndicators:be=!1,updateAfterMountMs:pe,scrollTop:Pe,onScroll:Me,children:Be})=>{const Ce=(0,w.useRef)(null),ze=(0,J.wW)(x);(0,w.useEffect)(()=>{Ce.current&&ee&&ee(Ce.current.view)},[Ce,ee]),(0,w.useEffect)(()=>{Ce.current&&Pe!=null&&Ce.current.scrollTop(Pe)},[Pe]),(0,w.useEffect)(()=>{pe&&setTimeout(()=>{const me=Ce.current;me?.update&&me.update()},pe)},[pe]);function We(me,Xe,Ve){return Ve.style&&Xe&&(Ve.style.display="none"),w.createElement("div",ne(Se({},Ve),{className:me}))}const Ze=(0,w.useCallback)(me=>We("track-horizontal",ae,me),[ae]),qe=(0,w.useCallback)(me=>We("track-vertical",Y,me),[Y]),lt=(0,w.useCallback)(me=>w.createElement("div",ne(Se({},me),{className:"thumb-horizontal"})),[]),Ye=(0,w.useCallback)(me=>w.createElement("div",ne(Se({},me),{className:"thumb-vertical"})),[]),Je=(0,w.useCallback)(me=>(me.style&&me.style.WebkitOverflowScrolling==="touch"&&(me.style.WebkitOverflowScrolling="auto"),w.createElement("div",ne(Se({},me),{className:"scrollbar-view"}))),[]),Ue=(0,w.useCallback)(()=>{Ce.current&&M&&M(Ce.current.getValues())},[M]);return w.createElement(A.ZP,{"data-testid":N,ref:Ce,className:(0,I.cx)(ze.customScrollbar,Q,{[ze.scrollbarWithScrollIndicators]:be}),onScrollStop:Ue,autoHeight:!0,autoHide:m,autoHideTimeout:v,hideTracksWhenNotNeeded:H,autoHeightMax:W,autoHeightMin:K,renderTrackHorizontal:Ze,renderTrackVertical:qe,renderThumbHorizontal:lt,renderThumbVertical:Ye,renderView:Je,onScroll:Me},be?w.createElement(fe,null,Be):Be)};var _e=oe;const x=m=>({customScrollbar:(0,I.iv)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:m.shape.borderRadius(2),width:`${m.spacing(1)} !important`,right:0,bottom:m.spacing(.25),top:m.spacing(.25)},".track-horizontal":{borderRadius:m.shape.borderRadius(2),height:`${m.spacing(1)} !important`,right:m.spacing(.25),bottom:m.spacing(.25),left:m.spacing(.25)},".thumb-vertical":{background:m.colors.action.focus,borderRadius:m.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:m.colors.action.focus,borderRadius:m.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,I.iv)({".scrollbar-view":{position:"static !important"}})});try{oe.displayName="CustomScrollbar",oe.__docgenInfo={description:"Wraps component into <Scrollbars> component from `react-custom-scrollbars`",displayName:"CustomScrollbar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}},autoHide:{defaultValue:{value:"false"},description:"",name:"autoHide",required:!1,type:{name:"boolean"}},autoHideTimeout:{defaultValue:{value:"200"},description:"",name:"autoHideTimeout",required:!1,type:{name:"number"}},autoHeightMax:{defaultValue:{value:"100%"},description:"",name:"autoHeightMax",required:!1,type:{name:"string"}},hideTracksWhenNotNeeded:{defaultValue:{value:"false"},description:"",name:"hideTracksWhenNotNeeded",required:!1,type:{name:"boolean"}},hideHorizontalTrack:{defaultValue:null,description:"",name:"hideHorizontalTrack",required:!1,type:{name:"boolean"}},hideVerticalTrack:{defaultValue:null,description:"",name:"hideVerticalTrack",required:!1,type:{name:"boolean"}},scrollRefCallback:{defaultValue:null,description:"",name:"scrollRefCallback",required:!1,type:{name:"((instance: HTMLDivElement | null) => void)"}},scrollTop:{defaultValue:null,description:"",name:"scrollTop",required:!1,type:{name:"number"}},setScrollTop:{defaultValue:null,description:"",name:"setScrollTop",required:!1,type:{name:"((position: positionValues) => void)"}},showScrollIndicators:{defaultValue:{value:"false"},description:"",name:"showScrollIndicators",required:!1,type:{name:"boolean"}},autoHeightMin:{defaultValue:{value:"0"},description:"",name:"autoHeightMin",required:!1,type:{name:"string | number"}},updateAfterMountMs:{defaultValue:null,description:"",name:"updateAfterMountMs",required:!1,type:{name:"number"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!1,type:{name:"UIEventHandler<Element>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/CustomScrollbar/CustomScrollbar.tsx#CustomScrollbar"]={docgenInfo:oe.__docgenInfo,name:"CustomScrollbar",path:"src/components/CustomScrollbar/CustomScrollbar.tsx#CustomScrollbar"})}catch{}},"./src/components/PanelChrome/PanelContext.ts":function(Ie,ge,O){O.d(ge,{bb:function(){return j},R9:function(){return y}});var I=O("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),w=O("../../../yarn/cache/eventemitter3-npm-5.0.1-5e423b7df3-543d6c858a.zip/node_modules/eventemitter3/index.mjs"),A=O("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-de4b53db10.zip/node_modules/rxjs/dist/esm5/internal/Observable.js"),J=O("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-de4b53db10.zip/node_modules/rxjs/dist/esm5/internal/operators/filter.js");class z{constructor(){this.subscribers=new Map,this.emitter=new w.Z}publish(V){this.emitter.emit(V.type,V)}subscribe(V,$){return this.getStream(V).subscribe({next:$})}getStream(V){return new A.y($=>{const X=le=>{$.next(le)};return this.emitter.on(V.type,X),this.subscribers.set(X,$),()=>{this.emitter.off(V.type,X),this.subscribers.delete(X)}})}newScopedBus(V,$){return new de([V],this,$)}emit(V,$){typeof V=="string"?this.emitter.emit(V,{type:V,payload:$}):this.emitter.emit(V.name,{type:V.name,payload:$})}on(V,$,X){if($.wrapper=le=>{$(le.payload)},typeof V=="string"?this.emitter.on(V,$.wrapper):this.emitter.on(V.name,$.wrapper),X){const le=X.$on("$destroy",()=>{this.off(V,$),le()})}}off(V,$){if(typeof V=="string"){this.emitter.off(V,$.wrapper);return}this.emitter.off(V.name,$.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[V,$]of this.subscribers)$.complete(),this.subscribers.delete(V)}}class de{constructor(V,$,X){this.path=V,this.eventBus=$,this.filterConfig=X??{onlyLocal:!1}}publish(V){V.origin||(V.origin=this),this.eventBus.publish(V)}filter(V){return this.filterConfig.onlyLocal?V.origin===this:!0}getStream(V){return this.eventBus.getStream(V).pipe((0,J.h)(this.filter.bind(this)))}subscribe(V,$){return this.getStream(V).subscribe({next:$})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(V,$){return new de([...this.path,V],this,$)}}const j=I.createContext({eventsScope:"global",eventBus:new z}),fe=j.Provider,y=()=>I.useContext(j)},"./src/components/Sparkline/Sparkline.tsx":function(Ie,ge,O){O.d(ge,{b:function(){return xt}});var I=O("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),w=O("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js");function A(t,e,r){var n,a;if(t===e)return!0;if(((n=t?.fields)==null?void 0:n.length)!==((a=e?.fields)==null?void 0:a.length)||t.name!==e.name)return!1;for(let i=0;i<t.fields.length;i++){const s=t.fields[i],o=e.fields[i];if(s.type!==o.type||s.name!==o.name)return!1;if(r)continue;if(s.labels&&o.labels&&!de(s.labels,o.labels))return!1;const c=s.config,p=o.config;let b=Object.keys(c),F=Object.keys(p);if(b.length!==F.length)return!1;for(const g of b){if(!(g in p))return!1;if(g!=="interval"&&!(0,I.isEqual)(c[g],p[g]))return!1}}return!0}function J(t,e,r){if(t===e)return!0;if(t?.length!==e?.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}const z=(t,e)=>t===e;function de(t,e,r=z){if(t===e)return!0;const n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(let i of n)if(!r(t[i],e[i]))return!1;return!0}var j=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/dataFrame.ts"),fe=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/fieldColor.ts"),y=O("../grafana-schema/src/common/common.gen.ts"),Z=O("../../../yarn/cache/uplot-npm-1.6.27-cbfd7aeda3-73fc02524a.zip/node_modules/uplot/dist/uPlot.esm.js"),V=O("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-de4b53db10.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),$=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/parser.ts"),X=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers.ts"),le=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/transformations/matchers/ids.ts"),ve=(t=>(t.append="append",t.reduce="reduce",t.order="order",t.organize="organize",t.rename="rename",t.calculateField="calculateField",t.seriesToColumns="seriesToColumns",t.seriesToRows="seriesToRows",t.merge="merge",t.concatenate="concatenate",t.labelsToFields="labelsToFields",t.filterFields="filterFields",t.filterFieldsByName="filterFieldsByName",t.filterFrames="filterFrames",t.filterByRefId="filterByRefId",t.renameByRegex="renameByRegex",t.filterByValue="filterByValue",t.noop="noop",t.ensureColumns="ensureColumns",t.groupBy="groupBy",t.sortBy="sortBy",t.histogram="histogram",t.configFromData="configFromData",t.rowsToFields="rowsToFields",t.prepareTimeSeries="prepareTimeSeries",t.convertFieldType="convertFieldType",t.fieldLookup="fieldLookup",t.heatmap="heatmap",t.spatial="spatial",t.joinByField="joinByField",t.joinByLabels="joinByLabels",t.extractFields="extractFields",t.groupingToMatrix="groupingToMatrix",t.limit="limit",t.partitionByValues="partitionByValues",t.timeSeriesTable="timeSeriesTable",t.formatTime="formatTime",t.formatString="formatString",t))(ve||{}),xe=Object.defineProperty,Se=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,m=(t,e,r)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v=(t,e)=>{for(var r in e||(e={}))_e.call(e,r)&&m(t,r,e[r]);if(oe)for(var r of oe(e))x.call(e,r)&&m(t,r,e[r]);return t},M=(t,e)=>Se(t,ne(e));const Q={id:ve.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(t,e)=>r=>r.pipe((0,V.U)(n=>Q.transformer(t,e)(n))),transformer:t=>e=>{var r;return!Array.isArray(e)||e.length===0?e:(r=N(t,e))!=null?r:[]}};function N(t,e){if(!t.conversions.length)return e;const r=e.map(n=>v({},n));for(const n of t.conversions){if(!n.targetField)continue;const a=X.Ls.get(le.mi.byName).get(n.targetField);for(const i of r)i.fields=i.fields.map(s=>a(s,i,r)?K(s,n):s)}return r}function K(t,e){switch(e.destinationType){case j.fS.time:return pe(t,e.dateFormat);case j.fS.number:return ae(t);case j.fS.string:return ee(t,e.dateFormat,{timeZone:e.timezone});case j.fS.boolean:return Y(t);case j.fS.enum:return Pe(t,e.enumConfig);case j.fS.other:return be(t);default:return t}}const W=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function H(t,e){let r=e?{format:e}:void 0;const n=t.values.slice();let a=n.find(s=>s!=null),i=typeof a=="string"&&W.test(a);for(let s=0;s<n.length;s++)if(n[s]){let o=i?Date.parse(n[s]):(0,$.J)(n[s],r).valueOf();n[s]=Number.isFinite(o)?o:null}else n[s]=null;return M(v({},t),{type:j.fS.time,values:n})}function ae(t){const e=t.values.slice(),r=e.some(n=>typeof n=="string");for(let n=0;n<e.length;n++){let a=e[n];r&&a!=null&&typeof a=="string"&&(a=a.replace(/,/g,""));const i=+a;e[n]=Number.isFinite(i)?i:null}return M(v({},t),{type:j.fS.number,values:e})}function Y(t){const e=t.values.slice();for(let r=0;r<e.length;r++)e[r]=!!e[r];return M(v({},t),{type:j.fS.boolean,values:e})}function ee(t,e,r){let n=t.values;switch(t.type){case j.fS.time:n=n.map(a=>(0,$.J)(a,r).format(e));break;case j.fS.other:n=n.map(a=>JSON.stringify(a));break;default:n=n.map(a=>`${a}`)}return M(v({},t),{type:j.fS.string,values:n})}function be(t){const e=t.values.slice();for(let r=0;r<e.length;r++)try{e[r]=JSON.parse(e[r])}catch{e[r]=null}return M(v({},t),{type:j.fS.other,values:e})}function pe(t,e){const r=typeof t.values[0]=="number";return t.type===j.fS.time&&r?t:r?M(v({},t),{type:j.fS.time}):H(t,e)}function Pe(t,e){const r=v({},e),n=t.values.slice(),a=new Map;if(r.text)for(let i=0;i<r.text.length;i++)a.set(r.text[i],i);else r.text=[];for(let i=0;i<n.length;i++){const s=n[i];a.has(s)||(r.text[a.size]=s,a.set(s,a.size)),n[i]=a.get(s)}return M(v({},t),{config:M(v({},t.config),{type:{enum:r}}),type:j.fS.enum,values:n})}var Me=Object.defineProperty,Be=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,qe=(t,e,r)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lt=(t,e)=>{for(var r in e||(e={}))We.call(e,r)&&qe(t,r,e[r]);if(ze)for(var r of ze(e))Ze.call(e,r)&&qe(t,r,e[r]);return t},Ye=(t,e)=>Be(t,Ce(e));function Je(t,e,r){var n}const Ue=(0,I.throttle)((...t)=>{console.log(...t)},500),me=t=>{let e=!1;return typeof window<"u"&&(e=window.localStorage.getItem("grafana.debug")==="true"),{logger:(r,n=!1,...a)=>{},enable:()=>e=!0,disable:()=>e=!1,isEnabled:()=>e}};var Xe=O("../../../yarn/cache/fast_array_intersect-npm-1.1.0-56bca1a61e-3bd65089e8.zip/node_modules/fast_array_intersect/lib/index.js"),Ve=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/dataframe/processDataFrame.ts"),Ge=(t=>(t.outer="outer",t.inner="inner",t.outerTabular="outerTabular",t))(Ge||{});const l={id:ve.joinByField,aliasIds:[ve.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(t,e)=>r=>r.pipe((0,V.U)(n=>l.transformer(t,e)(n))),transformer:(t,e)=>{let r;return n=>{if(n.length>1){t.byField&&!r&&(r=X.Ls.get(le.mi.byName).get(e.interpolate(t.byField)));const a=He({frames:n,joinBy:r,mode:t.mode});if(a)return[a]}return n}}};var f=Object.defineProperty,P=Object.defineProperties,R=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,Te=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e)=>{for(var r in e||(e={}))q.call(e,r)&&Te(t,r,e[r]);if(G)for(var r of G(e))ue.call(e,r)&&Te(t,r,e[r]);return t},Ae=(t,e)=>P(t,R(e));function Qe(t){const{timeField:e}=(0,Ve.sV)(t[0]);if(e)return X.Ls.get(le.mi.firstTimeField).get({});let r=[];for(const n of t[0].fields)n.type===j.fS.number&&r.push(n.name);for(let n=1;n<t.length;n++){const a=[];for(const i of t[0].fields)i.type===j.fS.number&&a.push(i.name);r=r.filter(i=>!a.includes(i))}return X.Ls.get(le.mi.byName).get(r[0])}function yt(t){var e;return(e=t.joinBy)!=null?e:Qe(t.frames)}function wt(t,e){if(e>=0){let r=t.fields[e];r.type!==j.fS.string&&!h(r.values)&&(t=(0,Ve.aK)(t,e))}return t}function He(t){var e,r,n,a,i;if(!((e=t.frames)!=null&&e.length))return;if(t.frames.length===1){let _=t.frames[0],d=_;const T=yt(t);let E=d.fields.findIndex(D=>T(D,d,t.frames));if(t.keepOriginIndices&&(d=Ae(se({},_),{fields:_.fields.map((D,k)=>{const B=se({},D),L={frameIndex:0,fieldIndex:k};return B.state?B.state.origin=L:B.state={origin:L},B})}),E>0)){const D=d.fields[E],k=d.fields.filter((B,L)=>L!==E);k.unshift(D),d.fields=k,E=0}if(E>=0&&(d=wt(d,E)),t.keep){let D=d.fields.filter((k,B)=>B===E||t.keep(k,d,t.frames));_!==d?d.fields=D:d=Ae(se({},_),{fields:D})}return d}const s=[],o=[],c=[],p=[];let b=1;const F=yt(t);for(let _=0;_<t.frames.length;_++){const d=t.frames[_];if(!d||!((r=d.fields)!=null&&r.length))continue;const T=[dt];let E,D=[],k=[];for(let L=0;L<d.fields.length;L++){const U=d.fields[L];if(U.state=U.state||{},!E&&F(U,d,t.frames))E=U;else{if(t.keep&&!t.keep(U,d,t.frames))continue;let ce=(n=U.config.custom)==null?void 0:n.spanNulls;T.push(ce===!0?dt:ce===-1?tt:rt);let we=(a=U.labels)!=null?a:{},Oe=U.name;d.name&&(U.name===j.M5?Oe=d.name:we=Ae(se({},we),{name:d.name})),D.push(Ae(se({},U),{name:Oe,labels:we}))}t.keepOriginIndices&&(U.state.origin={frameIndex:_,fieldIndex:L})}if(!E)continue;c.length===0&&c.push(E),s.push(T);const B=[E.values];for(const L of D)B.push(L.values),c.push(L),(i=L.state)==null||delete i.displayName,k.push(b),b++;p.push(k),o.push(B)}let g=[];return t.mode===Ge.outerTabular?g=et(o,p,c.length,s):g=u(o,s,t.mode),{length:g[0]?g[0].length:0,fields:c.map((_,d)=>Ae(se({},_),{values:g[d]}))}}function et(t,e,r,n){let a={};for(let s=0;s<t.length;s++){let o=t[s],c=o[0];for(let p=0;p<t.length;p++){if(p===s)continue;let b=t[p],F=b[0];for(let g=0;g<c.length;g++){const _=c[g],d=r-1;let T=[_].concat(new Array(d)),E=0;for(let D=1;D<o.length;D++){const k=e[s][E];T[k]=o[D][g],E++}for(let D=0;D<F.length;D++)if(c[g]===F[D]){let k=0;for(let B=1;B<b.length;B++){const L=e[p][k];T[L]=b[B][D],k++}break}a[JSON.stringify(T)]=T}}}let i=[];for(let s=0;s<r;s++)i.push(new Array(0));for(let s in a){const o=a[s];for(let c=0;c<o.length;c++)i[c].push(o[c])}return i}const dt=0,tt=1,rt=2;function Rt(t,e,r){for(let n=0,a,i=-1;n<e.length;n++){let s=e[n];if(s>i){for(a=s-1;a>=0&&t[a]==null;)t[a--]=null;for(a=s+1;a<r&&t[a]==null;)t[i=a++]=null}}}function u(t,e,r=Ge.outer){let n;if(r===Ge.inner)n=new Set((0,Xe.Z)(t.map(o=>o[0])));else{n=new Set;for(let o=0;o<t.length;o++){let p=t[o][0],b=p.length;for(let F=0;F<b;F++)n.add(p[F])}}let a=[Array.from(n).sort((o,c)=>o-c)],i=a[0].length,s=new Map;for(let o=0;o<i;o++)s.set(a[0][o],o);for(let o=0;o<t.length;o++){let c=t[o],p=c[0];for(let b=1;b<c.length;b++){let F=c[b],g=Array(i).fill(void 0),_=e?e[o][b]:tt,d=[];for(let T=0;T<F.length;T++){let E=F[T],D=s.get(p[T]);E===null?_!==dt&&(g[D]=E,_===rt&&d.push(D)):g[D]=E}Rt(g,d,i),a.push(g)}}return a}function h(t,e=50){const r=t.length;if(r<=1)return!0;let n=0,a=r-1;for(;n<=a&&t[n]==null;)n++;for(;a>=n&&t[a]==null;)a--;if(a<=n)return!0;const i=Math.max(1,Math.floor((a-n+1)/e));for(let s=t[n],o=n+i;o<=a;o+=i){const c=t[o];if(c!=null){if(c<=s)return!1;s=c}}return!0}var S=O("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-de4b53db10.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),C=O("../../../yarn/cache/rxjs-npm-7.8.1-41c443a75b-de4b53db10.zip/node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),re=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/common.ts");const ye=new Set;function ie(t){if(ye.has(t))throw new Error(`There is already an event defined with type '${t}'`);return ye.add(t),{name:t}}var Le=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/events/types.ts");const Ne={alertSuccess:ie("alert-success"),alertWarning:ie("alert-warning"),alertError:ie("alert-error")},Pa={refresh:ie("refresh"),componentDidMount:ie("component-did-mount"),dataReceived:ie("data-received"),dataError:ie("data-error"),dataFramesReceived:ie("data-frames-received"),dataSnapshotLoad:ie("data-snapshot-load"),editModeInitialized:ie("init-edit-mode"),initPanelActions:ie("init-panel-actions"),initialized:ie("panel-initialized"),panelTeardown:ie("panel-teardown"),render:ie("render")};class Dt extends Le.R{}Dt.type="graph-hover";class Pr extends Le.m{constructor(){super(...arguments),this.payload={point:{}}}}Pr.type="graph-hover-clear";var Fr=O("./src/components/PanelChrome/PanelContext.ts"),Tr=O("./src/components/VizLayout/VizLayout.tsx");const Cr="__fixed";function Er(t,e,r=[]){for(const n of r)if(typeof n=="function"){if(!n(t,e))return!1}else if(e[n]!==t[n])return!1;return!0}class vt extends w.Component{constructor(e){super(e),this.panelContext={},this.subscription=new S.w0,this.getTimeRange=()=>this.props.timeRange;let r=this.prepState(e);r.alignedData=r.config.prepData([r.alignedFrame]),this.state=r,this.plotInstance=w.createRef()}prepState(e,r=!0){var n;let a=null;const{frames:i,fields:s,preparePlotFrame:o}=e,p=(o||$r)(i,s||{x:X.Ls.get(le.mi.firstTimeField).get({}),y:X.Ls.get(le.mi.byTypes).get(new Set([j.fS.number,j.fS.enum]))},e.timeRange);if(st("GraphNG",!1,"data aligned",p),p){let b=(n=this.state)==null?void 0:n.config;r&&(b=e.prepConfig(p,this.props.frames,this.getTimeRange),st("GraphNG",!1,"config prepared",b)),a={alignedFrame:p,config:b},st("GraphNG",!1,"data prepared",a.alignedData)}return a}handleCursorUpdate(e){var r,n;const a=(n=(r=e.payload)==null?void 0:r.point)==null?void 0:n.time,i=this.plotInstance.current;if(i&&a){const s=i.valToPos(a,"x");let o;if(s&&(o=Qr(i,i.posToIdx(s))),!o||!s)return;i.setCursor({left:s,top:o})}}componentDidMount(){this.panelContext=this.context;const{eventBus:e}=this.panelContext;this.subscription.add(e.getStream(re.es).pipe((0,C.p)(50)).subscribe({next:r=>{e!==r.origin&&this.handleCursorUpdate(r)}})),this.subscription.add(e.getStream(Dt).pipe((0,C.p)(50)).subscribe({next:r=>this.handleCursorUpdate(r)})),this.subscription.add(e.getStream(re.xH).pipe((0,C.p)(50)).subscribe({next:()=>{var r;const n=(r=this.plotInstance)==null?void 0:r.current;n&&!n.cursor._lock&&n.setCursor({left:-10,top:-10})}}))}componentDidUpdate(e){const{frames:r,structureRev:n,timeZone:a,propsToDiff:i}=this.props,s=!Er(e,this.props,i);if(r!==e.frames||s||a!==e.timeZone){let o=this.prepState(this.props,!1);o&&((this.state.config===void 0||a!==e.timeZone||n!==e.structureRev||!n||s)&&(o.config=this.props.prepConfig(o.alignedFrame,this.props.frames,this.getTimeRange),st("GraphNG",!1,"config recreated",o.config)),o.alignedData=o.config.prepData([o.alignedFrame]),this.setState(o))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:e,height:r,children:n,renderLegend:a}=this.props,{config:i,alignedFrame:s,alignedData:o}=this.state;return i?w.createElement(Tr.AY,{width:e,height:r,legend:a(i)},(c,p)=>w.createElement(ft,{config:i,data:o,width:c,height:p,plotRef:b=>this.plotInstance.current=b},n?n(i,s):null)):null}}vt.contextType=Fr.bb;try{vt.displayName="GraphNG",vt.__docgenInfo={description:'"Time as X" core component, expects ascending x',displayName:"GraphNG",props:{frames:{defaultValue:null,description:"",name:"frames",required:!0,type:{name:"DataFrame[]"}},structureRev:{defaultValue:null,description:"",name:"structureRev",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},timeRange:{defaultValue:null,description:"",name:"timeRange",required:!0,type:{name:"TimeRange"}},timeZone:{defaultValue:null,description:"",name:"timeZone",required:!0,type:{name:"string | string[]"}},legend:{defaultValue:null,description:"",name:"legend",required:!0,type:{name:"VizLegendOptions"}},fields:{defaultValue:null,description:"",name:"fields",required:!1,type:{name:"XYFieldMatchers"}},renderers:{defaultValue:null,description:"",name:"renderers",required:!1,type:{name:"Renderers"}},tweakScale:{defaultValue:null,description:"",name:"tweakScale",required:!1,type:{name:"((opts: ScaleProps, forField: Field<any, Vector<any>>) => ScaleProps)"}},tweakAxis:{defaultValue:null,description:"",name:"tweakAxis",required:!1,type:{name:"((opts: AxisProps, forField: Field<any, Vector<any>>) => AxisProps)"}},onLegendClick:{defaultValue:null,description:"",name:"onLegendClick",required:!1,type:{name:"((event: GraphNGLegendEvent) => void)"}},prepConfig:{defaultValue:null,description:"",name:"prepConfig",required:!0,type:{name:"(alignedFrame: DataFrame, allFrames: DataFrame[], getTimeRange: () => TimeRange) => UPlotConfigBuilder"}},propsToDiff:{defaultValue:null,description:"",name:"propsToDiff",required:!1,type:{name:"(string | PropDiffFn<any>)[]"}},preparePlotFrame:{defaultValue:null,description:"",name:"preparePlotFrame",required:!1,type:{name:"((frames: DataFrame[], dimFields: XYFieldMatchers) => DataFrame | null)"}},renderLegend:{defaultValue:null,description:"",name:"renderLegend",required:!0,type:{name:"(config: UPlotConfigBuilder) => ReactElement<any, string | JSXElementConstructor<any>> | null"}},options:{defaultValue:null,description:`needed for propsToDiff to re-init the plot & config
this is a generic approach to plot re-init, without having to specify which panel-level options
should cause invalidation. we can drop this in favor of something like panelOptionsRev that gets passed in
similar to structureRev. then we can drop propsToDiff entirely.`,name:"options",required:!1,type:{name:"Record<string, any>"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/GraphNG/GraphNG.tsx#GraphNG"]={docgenInfo:vt.__docgenInfo,name:"GraphNG",path:"src/components/GraphNG/GraphNG.tsx#GraphNG"})}catch{}var Mr=Object.defineProperty,Ar=Object.defineProperties,Nr=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,Br=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,kt=(t,e,r)=>e in t?Mr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pt=(t,e)=>{for(var r in e||(e={}))Br.call(e,r)&&kt(t,r,e[r]);if(Vt)for(var r of Vt(e))Ir.call(e,r)&&kt(t,r,e[r]);return t},Ft=(t,e)=>Ar(t,Nr(e));const Lr={threshold:(t,e,r)=>t+r,midpoint:(t,e,r)=>(t+e)/2,plusone:(t,e,r)=>t+1};function zt(t){if(t.frame.length===0)return t.frame;let e=!0,{frame:r,refFieldName:n,refFieldPseudoMax:a,refFieldPseudoMin:i,insertMode:s}=t;s||(s=Lr.threshold);const o=Gt(r,n);if(o==null)return r;o.state=Ft(Pt({},o.state),{nullThresholdApplied:!0});const c=r.fields.map(b=>{var F;return((F=b.config.custom)==null?void 0:F.insertNulls)||o.config.interval||null}),p=new Set(c);if(p.delete(null),p.size===0)return r;if(p.size===1){const b=p.values().next().value;if(b<=0)return r;const F=o.values,g=r.fields.map(d=>d.values),_=Rr(F,g,b,i,a,s,e);return _===g?r:Ft(Pt({},r),{length:_[0].length,fields:r.fields.map((d,T)=>Ft(Pt({},d),{values:_[T]}))})}return r}function Rr(t,e,r,n=null,a=null,i,s){const o=t.length,c=[];if(n!=null&&n<t[0]){let g=Math.ceil((t[0]-n)/r),_=t[0]-g*r;for(;_<t[0];)c.push(i(_-r,_,r)),_+=r}c.push(t[0]);let p=t[0];for(let g=1;g<o;g++){const _=t[g];for(;_-p>r&&(c.push(i(p,_,r)),p+=r,!!s););c.push(_),p=_}if(a!=null&&a>p)for(;p+r<a;)c.push(i(p,a,r)),p+=r;const b=c.length;if(b===o)return e;const F=[];for(let g of e){let _;if(g!==t){_=Array(b);for(let d=0,T=0;d<b;d++)_[d]=t[T]===c[d]?g[T++]:null}else _=c;F.push(_)}return F}function Dr(t,e,r){let n,a;for(let i=0;i<e.length;i++)if(e[i]==null)a==null&&n!=null&&(a=i);else{if(a!=null){if(t[i]-n<r)for(;a<i;)e[a++]=void 0;a=null}n=t[i]}return e}var Vr=Object.defineProperty,kr=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,jt=Object.getOwnPropertySymbols,jr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,Ut=(t,e,r)=>e in t?Vr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gr=(t,e)=>{for(var r in e||(e={}))jr.call(e,r)&&Ut(t,r,e[r]);if(jt)for(var r of jt(e))Ur.call(e,r)&&Ut(t,r,e[r]);return t},Hr=(t,e)=>kr(t,zr(e));function bt(t){var e,r,n;return t.type===j.fS.number&&((e=t.config.custom)==null?void 0:e.drawStyle)===y.l8.Bars&&!((n=(r=t.config.custom)==null?void 0:r.hideFrom)!=null&&n.viz)}function Gt(t,e){return t.fields.find(r=>e!=null?r.name===e:r.type===j.fS.time)}function Kr(t,e){var r;const n=Gt(t,e);let a=n?.values;for(let i=0;i<t.fields.length;i++){let s=t.fields[i];if(s===n||bt(s))continue;let o=(r=s.config.custom)==null?void 0:r.spanNulls;typeof o=="number"&&o!==-1&&a&&(s.values=Dr(a,s.values,o))}return t}function $r(t,e,r){let n;e:for(let o of t)for(let c of o.fields)if(e.x(c,o,t)){n=c;break e}t=t.map(o=>{var c;return(c=n?.state)!=null&&c.nullThresholdApplied?o:zt({frame:o,refFieldName:n.name,refFieldPseudoMin:r?.from.valueOf(),refFieldPseudoMax:r?.to.valueOf()})});let a=0;t.forEach(o=>{o.fields.forEach(c=>{bt(c)&&(c.config.custom=Hr(Gr({},c.config.custom),{spanNulls:-1}),a++)})});let i=1/0;a>1&&t.forEach(o=>{if(!o.fields.some(bt))return;const c=n.values;for(let p=0;p<c.length;p++)p>0&&(i=Math.min(i,c[p]-c[p-1]))});let s=He({frames:t,joinBy:e.x,keep:e.y,keepOriginIndices:!0});return s?(s=Kr(s,n.name),i!==1/0&&(s.fields.forEach((o,c)=>{let p=o.values;if(c===0){let b=p[p.length-1];p.push(b+i,b+2*i)}else bt(o)?p.push(null,null):p.push(void 0,void 0)}),s.length+=2),s):null}function Wr(t,e){var r,n,a,i,s,o,c;const p="na",b=`${t.min!==void 0?t.min:p}-${t.max!==void 0?t.max:p}`,F=`${((r=t.custom)==null?void 0:r.axisSoftMin)!==void 0?t.custom.axisSoftMin:p}-${((n=t.custom)==null?void 0:n.axisSoftMax)!==void 0?t.custom.axisSoftMax:p}`,g=`${((a=t.custom)==null?void 0:a.axisPlacement)!==void 0?(i=t.custom)==null?void 0:i.axisPlacement:y.LB.Auto}`,_=(s=t.unit)!=null?s:Cr,d=(o=t.custom)!=null&&o.scaleDistribution?Zr(t.custom.scaleDistribution):y.wf.Linear,T=(c=t.custom)!=null&&c.axisLabel?t.custom.axisLabel:p;return`${_}/${b}/${F}/${g}/${d}/${T}/${e}`}function Zr(t){return t.type===y.wf.Log?`${t.type}${t.log}`:t.type}const qr=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function Fa(t){return t.replace(qr,e=>`{${e}}`)}const St=(t,e,r)=>{let n=e%2?r[0]||r[2]:r[1]||r[3];return r[e]||!n?0:8},Yr={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[St,St,St,St],series:[],hooks:{}};var Jr=(t=>(t[t.Pos=1]="Pos",t[t.Neg=-1]="Neg",t))(Jr||{});function Xr(t){let e=[],{series:r,dir:n}=t,a=r.length-1,i=r.slice().reverse();return i.forEach((s,o)=>{if(o!==a){let c=i[o+1];e.push({series:[s,c],dir:-1*n})}}),e}function Ht(t){let e=new Map;return t.fields.forEach(({config:r,values:n,type:a},i)=>{var s;if(i===0)return;let{custom:o}=r;if(o==null||(s=o.hideFrom)!=null&&s.viz)return;let{stacking:c}=o;if(c==null)return;let{mode:p,group:b}=c;if(p===y.o0.None)return;let F=o.transform,g=en(F,n),_=o.drawStyle,d=_===y.l8.Bars?o.barAlignment:_===y.l8.Line?o.lineInterpolation:null,T=`${g}|${p}|${b}|${Wr(r,a)}|${_}|${d}`,E=e.get(T);E==null&&(E={series:[],dir:g},e.set(T,E)),E.series.push(i)}),[...e.values()]}function Kt(t,e,r){let n=Array(t.fields.length),a=e.length,i=t.length,s=a>0?Array(i).fill(0):[],o=a>0?Array(i).fill(!1):[],c=Array.from({length:a},()=>s.slice()),p=Array.from({length:a},()=>o.slice());if(e.forEach((b,F)=>{let g=p[F];b.series.forEach(_=>{var d,T;let E=t.fields[_];if((T=(d=E.config.custom)==null?void 0:d.hideFrom)!=null&&T.viz)return;let D=E.values;for(let k=0;k<i;k++)D[k]!=null&&(g[k]=!0)})}),t.fields.forEach((b,F)=>{var g,_;let d=b.values;if(F===0){b.type===j.fS.time?n[F]=pe(b).values:n[F]=d;return}let{custom:T}=b.config;if(!T||(g=T.hideFrom)!=null&&g.viz){n[F]=d;return}if(T.transform===y.pR.Constant){let D=d.findIndex(B=>B!=null),k=d[D];d=Array(d.length).fill(void 0),d[D]=k}else if(d=d.slice(),T.transform===y.pR.NegativeY)for(let D=0;D<d.length;D++)d[D]!=null&&(d[D]*=-1);let E=(_=T.stacking)==null?void 0:_.mode;if(!E||E===y.o0.None)n[F]=d;else{let D=e.findIndex(U=>U.series.indexOf(F)>-1),k=c[D],B=p[D],L=n[F]=Array(i);for(let U=0;U<i;U++){let ce=d[U];ce!=null?L[U]=k[U]+=ce:L[U]=B[U]?k[U]:ce}}}),r){let b=n.map((F,g)=>{let _=e.findIndex(d=>d.series.indexOf(g)>-1);return _!==-1?c[_]:F});r({totals:b})}return t.fields.forEach((b,F)=>{var g,_,d,T;if(F===0||(_=(g=b.config.custom)==null?void 0:g.hideFrom)!=null&&_.viz)return;if(((T=(d=b.config.custom)==null?void 0:d.stacking)==null?void 0:T.mode)===y.o0.Percent){let D=e.findIndex(U=>U.series.indexOf(F)>-1),k=c[D],B=e[D],L=n[F];for(let U=0;U<i;U++){let ce=L[U];ce!=null&&(L[U]=k[U]===0?0:B.dir*(ce/k[U]))}}}),n}function Qr(t,e){let r,n=1,a=1,i=t.data[1][e],s=t.data[1][e];for(let o=1;o<t.data.length;o++){const p=t.data[o][e];p!=null&&(i==null?i=p:p>i&&(i=t.data[o][e],n=o),s==null?s=p:p<s&&(s=t.data[o][e],a=o))}return s==null&&i==null?r=void 0:s!=null&&i!=null?r=(t.valToPos(s,t.series[a].scale)+t.valToPos(i,t.series[n].scale))/2:r=t.valToPos(s||i,t.series[n||a].scale),r!==void 0&&r<0&&(r=t.bbox.height/devicePixelRatio),r}function en(t,e){const r=tn(e);return t===y.pR.NegativeY?r?1:-1:r?-1:1}function tn(t,e=100){const r=t.length;if(r===0)return!1;let n=0,a=r-1;for(;n<=a&&t[n]==null;)n++;for(;a>=n&&t[a]==null;)a--;let i=0,s=0;if(a>=n){const o=Math.max(1,Math.floor((a-n+1)/e));for(let c=n;c<=a;c+=o){const p=t[c];p!=null&&(p<0||Object.is(p,-0)?i++:p>0&&s++)}if(i>s)return!0}return!1}const $t=me("uPlot"),st=$t.logger;Je("graphng",void 0,$t);var rn=Object.defineProperty,Wt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,Zt=(t,e,r)=>e in t?rn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ln=(t,e)=>{for(var r in e||(e={}))nn.call(e,r)&&Zt(t,r,e[r]);if(Wt)for(var r of Wt(e))an.call(e,r)&&Zt(t,r,e[r]);return t};function sn(t,e){return e.width===t.width&&e.height===t.height}function on(t,e){return e.data===t.data}function un(t,e){return e.config===t.config}class ft extends w.Component{constructor(e){super(e),this.plotContainer=(0,w.createRef)(),this.plotCanvasBBox=(0,w.createRef)(),this.state={plot:null}}reinitPlot(){var e;let{width:r,height:n,plotRef:a}=this.props;if((e=this.state.plot)==null||e.destroy(),r===0&&n===0)return;this.props.config.addHook("setSize",o=>{o.over});const i=ln({width:Math.floor(this.props.width),height:Math.floor(this.props.height)},this.props.config.getConfig());st("UPlot",!1,"Reinitializing plot",i);const s=new Z.Z(i,this.props.data,this.plotContainer.current);a&&a(s),this.setState({plot:s})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;(e=this.state.plot)==null||e.destroy()}componentDidUpdate(e){let{plot:r}=this.state;sn(e,this.props)?un(e,this.props)?on(e,this.props)||r?.setData(this.props.data):this.reinitPlot():r?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return w.createElement("div",{style:{position:"relative"}},w.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}try{ft.displayName="UPlotChart",ft.__docgenInfo={description:"",displayName:"UPlotChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AlignedData | [_: null, ...series: FacetValues[]]"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"UPlotConfigBuilder"}},plotRef:{defaultValue:null,description:"",name:"plotRef",required:!1,type:{name:"((u: uPlot) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/uPlot/Plot.tsx#UPlotChart"]={docgenInfo:ft.__docgenInfo,name:"UPlotChart",path:"src/components/uPlot/Plot.tsx#UPlotChart"})}catch{}var cn=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/time.ts"),dn=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/timezones.ts"),qt=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/valueFormats/valueFormats.ts"),fn=Math.pow;function pn(t,e=0){if(Number.isInteger(t))return t;let r=fn(10,e),n=t*r*(1+Number.EPSILON);return Math.round(n)/r}function mn(t){return((""+t).split(".")[1]||"").length}var Ke=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formats.ts"),hn=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/datetime/formatter.ts"),pt=O("./src/utils/measureText.ts");class Tt{constructor(e){this.props=e}}var Yt=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/field/displayProcessor.ts"),Jt=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/themes/createTheme.ts"),Xt=(t=>(t.TimeSeriesWide="timeseries-wide",t.TimeSeriesLong="timeseries-long",t.TimeSeriesMany="timeseries-many",t.TimeSeriesMulti="timeseries-multi",t.NumericWide="numeric-wide",t.NumericMulti="numeric-multi",t.NumericLong="numeric-long",t.LogLines="log-lines",t.DirectoryListing="directory-listing",t.HeatmapRows="heatmap-rows",t.HeatmapCells="heatmap-cells",t.Histogram="histogram",t))(Xt||{});const Qt=()=>{var t,e,r;return(r=(e=(t=window?.grafanaBootData)==null?void 0:t.settings)==null?void 0:e.featureToggles)==null?void 0:r.transformationsVariableSupport};var gn=Object.defineProperty,yn=Object.defineProperties,vn=Object.getOwnPropertyDescriptors,er=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,tr=(t,e,r)=>e in t?gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nt=(t,e)=>{for(var r in e||(e={}))bn.call(e,r)&&tr(t,r,e[r]);if(er)for(var r of er(e))Sn.call(e,r)&&tr(t,r,e[r]);return t},at=(t,e)=>yn(t,vn(e));const rr=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],_n=[null],On=(t,e)=>t-e,Ta={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},xn={id:ve.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(t,e)=>r=>r.pipe((0,V.U)(n=>xn.transformer(t,e)(n))),transformer:(t,e)=>r=>{if(!Array.isArray(r)||r.length===0)return r;let n,a;t.bucketSize&&(Qt()&&(t.bucketSize=e.interpolate(t.bucketSize.toString())),typeof t.bucketSize=="string"?n=parseFloat(t.bucketSize):n=t.bucketSize,isNaN(n)&&(n=void 0)),t.bucketOffset&&(Qt()&&(t.bucketOffset=e.interpolate(t.bucketOffset.toString())),typeof t.bucketOffset=="string"?a=parseFloat(t.bucketOffset):a=t.bucketOffset,isNaN(a)&&(a=void 0));const i={bucketSize:n,bucketOffset:a,combine:t.combine},s=Tn(r,i);return s==null?[]:[En(s)]}},Ct="xMin";function wn(t){return t===Ct||t==="BucketMin"}const Et="xMax";function Pn(t){return t===Et||t==="BucketMax"}function Ca(t){let e,r;const n=[];for(const a of t.fields)wn(a.name)?e=a:Pn(a.name)?r=a:a.type===FieldType.number&&n.push(a);if(!r&&e&&e.values.length>1){let a=e.values,i=roundDecimals(a[1]-a[0],6);r=at(nt({},e),{name:Et,values:a.map(s=>s+i)})}if(!e&&r&&r?.values.length>1){let a=r.values,i=roundDecimals(a[1]-a[0],6);e=at(nt({},r),{name:Ct,values:a.map(s=>s-i)})}if(e&&r&&n.length)return{xMin:e,xMax:r,counts:n}}const Fn=20;function Tn(t,e){var r,n;let a=e?.bucketSize,i=(r=e?.bucketOffset)!=null?r:0;if(!a||a<0){let d=[];for(const L of t)for(const U of L.fields)U.type===j.fS.number&&(d=d.concat(U.values));d=d.filter(L=>L!=null),d.sort((L,U)=>L-U);let T=1/0;if(d.length===1)T=1;else for(let L=1;L<d.length;L++){let U=d[L]-d[L-1];U!==0&&(T=Math.min(T,U))}let E=d[0];const B=(d[d.length-1]-E)/Fn;for(let L=0;L<rr.length;L++){let U=rr[L];if(B<U&&U>=T){a=U;break}}}const s=d=>Mt(d-i,a)+i;let o=((n=(""+a).match(/\.\d+$/))!=null?n:["."])[0].length-1,c=[],p=[],b;for(const d of t)for(const T of d.fields)if(T.type===j.fS.number){let E=Cn(T.values,s,_n,On);c.push(E),p.push(at(nt({},T),{config:at(nt({},T.config),{unit:T.config.unit==="short"?"short":void 0})})),!b&&T.config.unit&&(b=T.config)}if(!p.length)return null;let F=u(c);for(let d=1;d<F.length;d++){let T=F[d];for(let E=0;E<T.length;E++)T[E]==null&&(T[E]=0)}const g={name:Ct,values:F[0],type:j.fS.number,state:void 0,config:o===0?b??{}:at(nt({},b),{decimals:o})},_=at(nt({},g),{name:Et,values:F[0].map(d=>d+a)});if(e?.combine){const d=new Array(F[0].length).fill(0);for(let T=1;T<F.length;T++)for(let E=0;E<d.length;E++)d[E]+=F[T][E];p=[at(nt({},p[0]),{name:"count",values:d,type:j.fS.number,state:void 0})]}else p.forEach((d,T)=>{d.values=F[T+1]});return{xMin:g,xMax:_,counts:p}}function Ea(t,e){return Math.round(t/e)*e}function nr(t,e){return Math.ceil(t/e)*e}function Mt(t,e){return Math.floor(t/e)*e}function Cn(t,e,r,n){let a=new Map;for(let c=0;c<t.length;c++){let p=t[c];p!=null&&(p=e(p));let b=a.get(p);b?b.count++:a.set(p,{value:p,count:1})}r&&r.forEach(c=>a.delete(c));let i=[...a.values()];n&&i.sort((c,p)=>n(c.value,p.value));let s=Array(i.length),o=Array(i.length);for(let c=0;c<i.length;c++)s[c]=i[c].value,o[c]=i[c].count;return[s,o]}function En(t,e){if(!t.xMin.display){const r=(0,Yt.U)({field:t.xMin,theme:e??(0,Jt.j)()});t.xMin.display=r,t.xMax.display=r}return t.counts[0].display=(0,Yt.U)({field:t.counts[0],theme:e??(0,Jt.j)()}),{length:t.xMin.values.length,meta:{type:Xt.Histogram},fields:[t.xMin,t.xMax,...t.counts]}}var Mn=Object.defineProperty,ar=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Nn=Object.prototype.propertyIsEnumerable,ot=Math.pow,ir=(t,e,r)=>e in t?Mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bn=(t,e)=>{for(var r in e||(e={}))An.call(e,r)&&ir(t,r,e[r]);if(ar)for(var r of ar(e))Nn.call(e,r)&&ir(t,r,e[r]);return t};class In extends Tt{merge(e){this.props.min=At("min",this.props.min,e.min),this.props.max=At("max",this.props.max,e.max)}getConfig(){var e,r;let{isTime:n,scaleKey:a,min:i,max:s,softMin:o,softMax:c,range:p,direction:b,orientation:F,centeredZero:g,decimals:_}=this.props;const d=this.props.distribution,T=n?{}:{distr:d===y.wf.Symlog?4:d===y.wf.Log?3:d===y.wf.Ordinal?2:1,log:d===y.wf.Log||d===y.wf.Symlog?(e=this.props.log)!=null?e:2:void 0,asinh:d===y.wf.Symlog?(r=this.props.linearThreshold)!=null?r:1:void 0};if(d===y.wf.Log){let Oe=this.props.log,he=Oe===2?Math.log2:Math.log10;i!=null&&(i<=0?i=null:i=ot(Oe,Math.floor(he(i)))),s!=null&&(s<=0?s=null:s=ot(Oe,Math.ceil(he(s)))),o!=null&&(o<=0?o=null:o=ot(Oe,Math.floor(he(o)))),c!=null&&(c<=0?c=null:c=ot(Oe,Math.ceil(he(c))))}let E=o==null?3:1,D=c==null?3:1;const k={min:{pad:.1,hard:i??-1/0,soft:o||0,mode:E},max:{pad:.1,hard:s??1/0,soft:c||0,mode:D}};let B=o==null&&i!=null,L=c==null&&s!=null,U=B&&L;const ce=(Oe,he,Ee,De)=>{var ke;const Fe=Oe.scales[De];let te=[he,Ee];if(De==="x"&&!n&&d===y.wf.Linear||!U&&he==null&&Ee==null)return te;let $e=(ke=Fe.log)!=null?ke:10;if(Fe.distr===1||Fe.distr===2||Fe.distr===4){if(g){let ut=Math.abs(he),Lt=Math.abs(Ee),ct=Math.max(ut,Lt);ct===0&&(ct=80),he=-ct,Ee=ct}Fe.distr===4?te=Z.Z.rangeAsinh(he,Ee,$e,!0):te=Z.Z.rangeNum(B?i:he,L?s:Ee,k)}else Fe.distr===3&&(te=Z.Z.rangeLog(i??he,s??Ee,$e,!0));if(_===0)if(Fe.distr===1||Fe.distr===2)te[0]=Mt(te[0],1),te[1]=nr(te[1],1);else if(Fe.distr===3){let ut=Fe.log===2?Math.log2:Math.log10;if(te[0]<=1)te[0]=1;else{let ct=Math.floor(ut(te[0]));te[0]=ot($e,ct)}let Lt=Math.ceil(ut(te[1]));te[1]=ot($e,Lt),te[0]===te[1]&&(te[1]*=$e)}else Fe.distr===4&&(te[0]=Mt(te[0],1),te[1]=nr(te[1],1));return(Fe.distr===1||Fe.distr===4)&&(B&&(te[0]=i),L&&(te[1]=s)),te[0]>=te[1]&&(te[0]=Fe.distr===3?1:0,te[1]=100),te};let we=!n&&!U;return(0,qt.br)(a)&&(we=!1,p=[0,1]),{[a]:Bn({time:n,auto:we,range:p??ce,dir:b,ori:F},T)}}}function At(t,e,r){const n=e!=null,a=r!=null;return n?a?t==="min"?e<r?e:r:e>r?e:r:e:r}var Ln=Object.defineProperty,lr=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable,sr=(t,e,r)=>e in t?Ln(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vn=(t,e)=>{for(var r in e||(e={}))Rn.call(e,r)&&sr(t,r,e[r]);if(lr)for(var r of lr(e))Dn.call(e,r)&&sr(t,r,e[r]);return t};const mt=12,or=8;class kn extends Tt{merge(e){this.props.size=At("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===y.LB.Auto&&(this.props.placement=e.placement)}calculateSpace(e,r,n,a,i){const s=e.axes[r],o=e.scales[s.scale];if(s.side!==2||!o)return 30;const c=40;if(o.time){const p=i/c,b=(a-n)/p,F=ur(e,[n],r,c,b);return(0,pt.X1)(F[0],mt).width+18}return c}calculateAxisSize(e,r,n){const a=e.axes[n];let i=a.ticks.size;if(a.side===2)i+=a.gap+mt;else if(r?.length){let s=r.reduce((c,p)=>Math.max(c,(0,pt.X1)(p,mt).width),0);const o=Math.min(e.width*.4,s);i+=a.gap+a.labelGap+o}return Math.ceil(i)}getConfig(){let{scaleKey:e,label:r,show:n=!0,placement:a=y.LB.Auto,grid:i={show:!0},ticks:s,space:o,filter:c,gap:p=5,formatValue:b,splits:F,values:g,incrs:_,isTime:d,timeZone:T,theme:E,tickLabelRotation:D,size:k,color:B,border:L,decimals:U,distr:ce=y.wf.Linear}=this.props;const we=`${mt}px ${E.typography.fontFamily}`,Oe=E.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,qt.br)(e)&&(F=[0,1]),U===0&&ce===y.wf.Linear&&(c=(Ee,De)=>De.map(ke=>Number.isInteger(ke)?ke:null));let he={scale:e,show:n,stroke:B??E.colors.text.primary,side:zn(a),font:we,size:k??((Ee,De,ke)=>this.calculateAxisSize(Ee,De,ke)),rotate:D,gap:p,labelGap:0,grid:{show:i.show,stroke:Oe,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:L?.show?B??E.colors.text.primary:Oe,width:1/devicePixelRatio,size:4},s),splits:F,values:g,space:o??((Ee,De,ke,Fe,te)=>this.calculateSpace(Ee,De,ke,Fe,te)),filter:c,incrs:_};return L?.show&&(he.border=Vn({stroke:B??E.colors.text.primary,width:1/devicePixelRatio},L)),r!=null&&r.length>0&&(he.label=r,he.labelSize=mt+or,he.labelFont=we,he.labelGap=or),g?he.values=g:d?he.values=ur:b&&(he.values=(Ee,De,ke,Fe,te)=>{let $e=mn(pn(te,6));return De.map(ut=>b(ut,$e>0?$e:void 0))}),he.timeZone=T,he}}const Re={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function ur(t,e,r,n,a){var i,s;const o=t.axes[r].timeZone,c=t.scales.x,p=((i=c?.max)!=null?i:0)-((s=c?.min)!=null?s:0),b=Math.round(Re.year/Re.day)*Re.day,F=Math.round(a/Re.day)*Re.day;let g=Ke.U6.interval.year;return a<Re.second?g=Ke.U6.interval.millisecond:a<=Re.minute?g=Ke.U6.interval.second:p<=Re.day?g=Ke.U6.interval.minute:a<=Re.day?g=Ke.U6.interval.hour:p<Re.year?g=Ke.U6.interval.day:F===b?g=Ke.U6.interval.year:a<=Re.year&&(g=Ke.U6.interval.month),e.map(_=>_==null?"":(0,hn.dq)(_,{format:g,timeZone:o}))}function zn(t){switch(t){case y.LB.Top:return 0;case y.LB.Right:return 1;case y.LB.Bottom:return 2;case y.LB.Left:}return 3}var ht=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/fieldColor.ts"),it=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/themes/colorManipulator.ts"),gt=O("../../../yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-6df4d07fce.zip/node_modules/tinycolor2/esm/tinycolor.js"),cr=O("../../.yarn/__virtual__/@grafana-data-virtual-0996183232/1/packages/grafana-data/src/types/thresholds.ts");function dr(t,e,r){let n=0,a=0,i=0,s=0;return t===3?(a=e.top,s=e.top+e.height):t===2?(n=e.left+e.width,i=e.left):t===1?(a=e.top+e.height,s=e.top):t===0&&(n=e.left,i=e.left+e.width),r.createLinearGradient(n,a,i,s)}function jn(t,e){return(r,n)=>{const a=(0,pt.AE)(),i=dr(r.scales.x.ori===y.wN.Horizontal?3:2,r.bbox,a);return i.addColorStop(0,it.Fq(t,e)),i.addColorStop(1,it.Fq(t,0)),i}}function Un(t,e,r){return(n,a)=>{const i=(0,pt.AE)(),s=dr(n.scales.x.ori===y.wN.Horizontal?3:2,n.bbox,i),o=(0,gt.Z)(t).spin(-15),c=(0,gt.Z)(t).spin(15);return r.isDark?(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,o.darken(10).setAlpha(e).toString())):(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,o.setAlpha(e).toString())),s}}var Gn=(t=>(t[t.Right=0]="Right",t[t.Up=1]="Up",t[t.Left=2]="Left",t[t.Down=3]="Down",t))(Gn||{});function _t(t,e,r,n=!1){let a=t.scales[e],i=null,s=null;for(let B=0;B<r.length;B++){let L=r[B][0];if((L<=a.min||i==null)&&(i=B),s=B,L>=a.max)break}if(i===s)return r[i][1];let o=r[i][0],c=r[s][0];o===-1/0&&(o=a.min),c===1/0&&(c=a.max);let p=Math.round(t.valToPos(o,e,!0)),b=Math.round(t.valToPos(c,e,!0)),F=p-b;if(F===0)return r[s][1];let g,_,d,T;t.scales.x.ori===y.wN.Horizontal?(g=d=0,_=p,T=b):(_=T=0,g=p,d=b);let D=(0,pt.AE)().createLinearGradient(g,_,d,T),k;for(let B=i;B<=s;B++){let L=r[B],U=B===i?p:B===s?b:Math.round(t.valToPos(L[0],e,!0)),ce=(p-U)/F;n&&B>i&&D.addColorStop(ce,k),D.addColorStop(ce,k=L[1])}return D}function Hn(t,e){let r=t.scales[e],n=1/0,a=-1/0;return t.series.forEach((i,s)=>{if(i.show&&i.scale===e)if(i.min==null){let o=t.data[s];for(let c=0;c<o.length;c++)o[c]!=null&&(n=Math.min(n,o[c]),a=Math.max(a,o[c]))}else n=Math.min(n,i.min),a=Math.max(a,i.max)}),a===n&&(n=r.min,a=r.max),[n,a]}function Nt(t,e,r,n,a,i){var s,o,c,p;let b=(s=r??a)!=null?s:null,F=(o=n??i)!=null?o:null;if(b==null||F==null){let[g,_]=Hn(t,e);b=(c=b??g)!=null?c:0,F=(p=F??_)!=null?p:100}return[b,F]}function fr(t,e,r,n,a,i,s,o){if(!r)throw Error("Missing colorMode required for color scheme gradients");if(!n)throw Error("Missing thresholds required for color scheme gradients");return(c,p)=>{let b=c.series[p].scale,F="";if(r.id===ht.S.Thresholds)if(n.mode===cr.H.Absolute){const g=n.steps.map(_=>[_.value,it.Fq(e.visualization.getColorByName(_.color),t)]);F=_t(c,b,g,!0)}else{const[g,_]=Nt(c,b,a,i,s,o),d=_-g,T=n.steps.map(E=>[g+d*(E.value/100),it.Fq(e.visualization.getColorByName(E.color),t)]);F=_t(c,b,T,!0)}else if(r.getColors){const g=r.getColors(e),[_,d]=Nt(c,b,a,i,s,o),T=d-_,E=g.map((D,k)=>[_+T*(k/(g.length-1)),it.Fq(e.visualization.getColorByName(D),t)]);F=_t(c,b,E,!1)}return F}}var Kn=Object.defineProperty,pr=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,mr=(t,e,r)=>e in t?Kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e)=>{for(var r in e||(e={}))$n.call(e,r)&&mr(t,r,e[r]);if(pr)for(var r of pr(e))Wn.call(e,r)&&mr(t,r,e[r]);return t};class Zn extends Tt{getConfig(){var e;const{facets:r,drawStyle:n,pathBuilder:a,pointsBuilder:i,pointsFilter:s,lineInterpolation:o,lineWidth:c,lineStyle:p,barAlignment:b,barWidthFactor:F,barMaxWidth:g,showPoints:_,pointSize:d,scaleKey:T,pxAlign:E,spanNulls:D,show:k=!0}=this.props;let B={},L=this.getLineColor();B.stroke=L,B.width=c,p&&p.fill!=="solid"&&(p.fill==="dot"&&(B.cap="round"),B.dash=(e=p.dash)!=null?e:[10,10]),a!=null?B.paths=a:n===y.l8.Points?B.paths=()=>null:n!=null&&(B.paths=(we,Oe,he,Ee)=>qn(n,o,b,F,g)(we,Oe,he,Ee));const U=typeof L=="string"?L:(we,Oe)=>we.series[Oe]._stroke,ce={points:{stroke:U,fill:U,size:!d||d<c?void 0:d,filter:s}};return i!=null?ce.points.show=i:n===y.l8.Points?ce.points.show=!0:_===y.Jp.Auto?n===y.l8.Bars&&(ce.points.show=!1):_===y.Jp.Never?ce.points.show=!1:_===y.Jp.Always&&(ce.points.show=!0),hr(hr({scale:T,facets:r,spanGaps:typeof D=="number"?!1:D,value:()=>"",pxAlign:E,show:k,fill:this.getFill()},B),ce)}getLineColor(){const{lineColor:e,gradientMode:r,colorMode:n,thresholds:a,theme:i,hardMin:s,hardMax:o,softMin:c,softMax:p,dynamicSeriesColor:b}=this.props;return r===y.FI.None&&b?(F,g)=>{var _,d;return(d=(_=b(g))!=null?_:e)!=null?d:ht.R}:r===y.FI.Scheme&&n?.id!==ht.S.Fixed?fr(1,i,n,a,s,o,c,p):e??ht.R}getFill(){const{lineColor:e,fillColor:r,gradientMode:n,fillOpacity:a,colorMode:i,thresholds:s,theme:o,hardMin:c,hardMax:p,softMin:b,softMax:F,dynamicSeriesColor:g}=this.props;if(r)return r;const _=n??y.FI.None,d=(a??0)/100;if(_===y.FI.None&&g&&d>0)return(T,E)=>{let D=T.series[E]._stroke;return it.Fq(D??"",d)};switch(_){case y.FI.Opacity:return jn(r??e,d);case y.FI.Hue:return Un(r??e,d,o);case y.FI.Scheme:if(i?.id!==ht.S.Fixed)return fr(d,o,i,s,c,p,b,F);default:if(d>0)return it.Fq(e??"",d)}}}let je;function qn(t,e,r=y.pu.Center,n=.6,a=200){const i=Z.Z.paths;if(je||(je={linear:i.linear(),smooth:i.spline(),stepBefore:i.stepped({align:-1}),stepAfter:i.stepped({align:1})}),t===y.l8.Bars){let s=`bars|${r}|${n}|${a}`;return je[s]||(je[s]=i.bars({size:[n,a],align:r})),je[s]}else if(t===y.l8.Line){if(e===y.KC.StepBefore)return je.stepBefore;if(e===y.KC.StepAfter)return je.stepAfter;if(e===y.KC.Smooth)return je.smooth}return je.linear}var Yn=Object.defineProperty,Jn=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,Qn=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,yr=(t,e,r)=>e in t?Yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ta=(t,e)=>{for(var r in e||(e={}))Qn.call(e,r)&&yr(t,r,e[r]);if(gr)for(var r of gr(e))ea.call(e,r)&&yr(t,r,e[r]);return t},ra=(t,e)=>Jn(t,Xn(e));function na(t){const e=t.config.mode===y.i3.Dashed||t.config.mode===y.i3.DashedAndArea?[10,10]:null;function r(g,_,d,T){let E=g.ctx,D=0;for(let k=0;k<d.length;k++)if(d[k].color==="transparent"){D=k;break}E.lineWidth=2,e&&E.setLineDash(e);for(let k=1;k<d.length;k++){const B=d[k];let L;D>=k&&k>0?L=(0,gt.Z)(T.visualization.getColorByName(d[k-1].color)):L=(0,gt.Z)(T.visualization.getColorByName(B.color)),L.getAlpha()===1&&L.setAlpha(.7);let U=Math.round(g.bbox.left),ce=Math.round(g.valToPos(B.value,_,!0)),we=Math.round(g.bbox.left+g.bbox.width),Oe=Math.round(g.valToPos(B.value,_,!0));E.beginPath(),E.moveTo(U,ce),E.lineTo(we,Oe),E.strokeStyle=L.toString(),E.stroke()}}function n(g,_,d,T){let E=g.ctx,D=_t(g,_,d.map(k=>{let B=(0,gt.Z)(T.visualization.getColorByName(k.color));return B.getAlpha()===1&&B.setAlpha(.15),[k.value,B.toString()]}),!0);E.fillStyle=D,E.fillRect(g.bbox.left,g.bbox.top,g.bbox.width,g.bbox.height)}const{scaleKey:a,thresholds:i,theme:s,config:o,hardMin:c,hardMax:p,softMin:b,softMax:F}=t;return g=>{const _=g.ctx,{min:d,max:T}=g.scales.x,{min:E,max:D}=g.scales[a];if(d==null||T==null||E==null||D==null)return;let{steps:k,mode:B}=i;if(B===cr.H.Percentage){let[L,U]=Nt(g,a,c,p,b,F),ce=U-L;k=k.map(we=>ra(ta({},we),{value:L+ce*(we.value/100)}))}switch(_.save(),o.mode){case y.i3.Line:case y.i3.Dashed:r(g,a,k,s);break;case y.i3.Area:n(g,a,k,s);break;case y.i3.LineAndArea:case y.i3.DashedAndArea:n(g,a,k,s),r(g,a,k,s)}_.restore()}}var aa=Object.defineProperty,ia=Object.defineProperties,la=Object.getOwnPropertyDescriptors,vr=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,br=(t,e,r)=>e in t?aa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bt=(t,e)=>{for(var r in e||(e={}))sa.call(e,r)&&br(t,r,e[r]);if(vr)for(var r of vr(e))oa.call(e,r)&&br(t,r,e[r]);return t},ua=(t,e)=>ia(t,la(e));const ca={drag:{setScale:!1},points:{size:(t,e)=>t.series[e].points.size*2,width:(t,e,r)=>r/4},focus:{prox:30}};class da{constructor(e=cn.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=n=>{let a=new Date(n);return this.tz?Z.Z.tzDate(a,this.tz):a};var r;this.tz=(r=(0,dn.Pr)(e,Date.now()))==null?void 0:r.ianaName}addHook(e,r){st("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(r)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",na(e)))}addAxis(e){var r,n,a;e.placement=(r=e.placement)!=null?r:y.LB.Auto,e.grid=(n=e.grid)!=null?n:{};let i=e.scaleKey;if(i==="x"&&(i+=(a=e.timeZone)!=null?a:""),this.axes[i]){this.axes[i].merge(e);return}e.placement===y.LB.Auto&&(e.placement=this.hasLeftAxis?y.LB.Right:y.LB.Left),e.placement===y.LB.Left&&(this.hasLeftAxis=!0),e.placement===y.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[i]=new kn(e)}getAxisPlacement(e){var r;const n=this.axes[e];return(r=n?.props.placement)!=null?r:y.LB.Left}setCursor(e){this.cursor=(0,I.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new Zn(e))}getSeries(){return this.series}addScale(e){const r=this.scales.find(n=>n.props.scaleKey===e.scaleKey);if(r){r.merge(e);return}this.scales.push(new In(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=r=>(this.frames=r,e(r,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){const e=ua(Bt({},Yr),{mode:this.mode,series:[this.mode===2?null:{value:()=>""}]});e.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(n=>n.getConfig()),e.series=[...e.series,...this.series.map(n=>n.getConfig())],e.scales=this.scales.reduce((n,a)=>Bt(Bt({},n),a.getConfig()),{}),e.hooks=this.hooks,e.select=this.select;const r=(n="")=>(a,i)=>{let s=a.series[i].points._stroke;if(typeof s!="string"){let o=this.frames[0].fields[i];s=o.display(o.values[a.cursor.idxs[i]]).color}return s+n};return e.cursor=(0,I.merge)({},ca,{points:{stroke:r("80"),fill:r()}},this.cursor),e.tzDate=this.tzDate,Array.isArray(this.padding)&&(e.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(n=>{Xr(n).forEach(a=>{this.addBand(a)})}),this.bands.length&&(e.bands=this.bands),e}ensureNonOverlappingAxes(e){const r=e.find(i=>i.props.scaleKey==="x"),n=e.filter(i=>{var s;return((s=i.props.grid)==null?void 0:s.show)===void 0}),a=n.findIndex(i=>i.props.placement===y.LB.Left||i.props.placement===y.LB.Right||i.props.placement===y.LB.Bottom&&i!==r);for(let i=0;i<n.length;i++)n[i]===r||i===a?n[i].props.grid.show=!0:n[i].props.grid.show=!1;return e}}var fa=Object.defineProperty,pa=Object.defineProperties,ma=Object.getOwnPropertyDescriptors,Sr=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,_r=(t,e,r)=>e in t?fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))ha.call(e,r)&&_r(t,r,e[r]);if(Sr)for(var r of Sr(e))ga.call(e,r)&&_r(t,r,e[r]);return t},ya=(t,e)=>pa(t,ma(e));function Or(t,e){var r,n,a;const i=t.y.values.length,s=It(It({},t.y.config),e),o=(r=t.x)!=null?r:{name:"",values:[...Array(i).keys()],type:j.fS.number,config:{}};let c={refId:"sparkline",fields:[o,ya(It({},t.y),{config:s})],length:i};return h(o.values)||(c=(0,Ve.aK)(c,0)),zt({frame:c,refFieldPseudoMin:(n=t.timeRange)==null?void 0:n.from.valueOf(),refFieldPseudoMax:(a=t.timeRange)==null?void 0:a.to.valueOf()})}var va=Object.defineProperty,ba=Object.defineProperties,Sa=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,wr=(t,e,r)=>e in t?va(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e)=>{for(var r in e||(e={}))_a.call(e,r)&&wr(t,r,e[r]);if(xr)for(var r of xr(e))Oa.call(e,r)&&wr(t,r,e[r]);return t},xa=(t,e)=>ba(t,Sa(e));const wa={drawStyle:y.l8.Line,showPoints:y.Jp.Auto,axisPlacement:y.LB.Hidden,pointSize:2};class xt extends w.PureComponent{constructor(e){super(e);const r=Or(e.sparkline,e.config);this.state={data:Kt(r,Ht(r)),alignedDataFrame:r,configBuilder:this.prepareConfig(r)}}static getDerivedStateFromProps(e,r){const n=Or(e.sparkline,e.config);return n?xa(Ot({},r),{data:Kt(n,Ht(n)),alignedDataFrame:n}):Ot({},r)}componentDidUpdate(e,r){const{alignedDataFrame:n}=this.state;if(!n)return;let a=!1;e.sparkline!==this.props.sparkline?a=!A(this.state.alignedDataFrame,r.alignedDataFrame):a=!(0,I.isEqual)(e.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var r,n,a;let{min:i,max:s}=(r=this.state.alignedDataFrame.fields[1].state)==null?void 0:r.range;return i===s?(i===0?s=100:(i=0,s*=2),[i,s]):[Math.max(i,(n=e.config.min)!=null?n:-1/0),Math.min(s,(a=e.config.max)!=null?a:1/0)]}prepareConfig(e){var r;const{theme:n}=this.props,a=new da;a.setCursor({show:!1,x:!1,y:!1});const i=e.fields[0];a.addScale({scaleKey:"x",orientation:y.wN.Horizontal,direction:y.bQ.Right,isTime:!1,range:()=>{const{sparkline:s}=this.props;if(s.x){if(s.timeRange&&s.x.type===j.fS.time)return[s.timeRange.from.valueOf(),s.timeRange.to.valueOf()];const o=s.x.values;return[o[0],o[o.length-1]]}return[0,s.y.values.length-1]}}),a.addAxis({scaleKey:"x",theme:n,placement:y.LB.Hidden});for(let s=0;s<e.fields.length;s++){const o=e.fields[s],c=o.config,p=Ot(Ot({},wa),c.custom);if(o===i||o.type!==j.fS.number)continue;const b=c.unit||"__fixed";a.addScale({scaleKey:b,orientation:y.wN.Vertical,direction:y.bQ.Up,range:()=>this.getYRange(o)}),a.addAxis({scaleKey:b,theme:n,placement:y.LB.Hidden});const F=(0,fe.fD)(o),g=F.getCalculator(o,n)(0,0),_=p.drawStyle===y.l8.Points?y.Jp.Always:p.showPoints;a.addSeries({pxAlign:!1,scaleKey:b,theme:n,colorMode:F,thresholds:c.thresholds,drawStyle:p.drawStyle,lineColor:(r=p.lineColor)!=null?r:g,lineWidth:p.lineWidth,lineInterpolation:p.lineInterpolation,showPoints:_,pointSize:p.pointSize,fillOpacity:p.fillOpacity,fillColor:p.fillColor,lineStyle:p.lineStyle,gradientMode:p.gradientMode})}return a}render(){const{data:e,configBuilder:r}=this.state,{width:n,height:a}=this.props;return w.createElement(ft,{data:e,config:r,width:n,height:a})}}try{xt.displayName="Sparkline",xt.__docgenInfo={description:"",displayName:"Sparkline",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"FieldConfig<GraphFieldConfig>"}},sparkline:{defaultValue:null,description:"",name:"sparkline",required:!0,type:{name:"FieldSparkline"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Sparkline/Sparkline.tsx#Sparkline"]={docgenInfo:xt.__docgenInfo,name:"Sparkline",path:"src/components/Sparkline/Sparkline.tsx#Sparkline"})}catch{}},"./src/components/VizLayout/VizLayout.tsx":function(Ie,ge,O){O.d(ge,{AY:function(){return j}});var I=O("../../../yarn/cache/@emotion-css-npm-11.11.2-dbfa42cf83-1edea109df.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),w=O("../../../yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),A=O("../../.yarn/__virtual__/react-use-virtual-dd7926f458/2/yarn/cache/react-use-npm-17.4.0-0ef4521544-0889da919b.zip/node_modules/react-use/esm/useMeasure.js"),J=O("./src/themes/ThemeContext.tsx"),z=O("./src/themes/mixins.ts"),de=O("./src/components/CustomScrollbar/CustomScrollbar.tsx");const j=({width:Z,height:V,legend:$,children:X})=>{const le=(0,J.l4)(),ve=(0,J.wW)(fe),xe={display:"flex",width:`${Z}px`,height:`${V}px`},[Se,ne]=(0,A.Z)();if(!$)return w.createElement(w.Fragment,null,w.createElement("div",{style:xe,className:ve.viz},X(Z,V)));let{placement:oe,maxHeight:_e="35%",maxWidth:x="60%"}=$.props;document.body.clientWidth<le.breakpoints.values.lg&&(oe="bottom");let m=null;const v={};switch(oe){case"bottom":xe.flexDirection="column",v.maxHeight=_e,ne.height&&(m={width:Z,height:V-ne.height});break;case"right":xe.flexDirection="row",v.maxWidth=x,ne.width&&(m={width:Z-ne.width,height:V}),$.props.width&&(v.width=$.props.width,m={width:Z-$.props.width,height:V});break}return m?.width===0&&(m.width=Z),m?.height===0&&(m.height=V),w.createElement("div",{style:xe},w.createElement("div",{className:ve.viz},m&&X(m.width,m.height)),w.createElement("div",{style:v,ref:Se},w.createElement(de.$,{hideHorizontalTrack:!0},$)))},fe=Z=>({viz:(0,I.iv)({flexGrow:2,borderRadius:Z.shape.radius.default,"&:focus-visible":(0,z.SV)(Z)})}),y=({children:Z})=>w.createElement(w.Fragment,null,Z);j.Legend=y;try{j.displayName="VizLayout",j.__docgenInfo={description:"",displayName:"VizLayout",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"ReactElement<VizLayoutLegendProps, string | JSXElementConstructor<any>> | null"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/VizLayout/VizLayout.tsx#VizLayout"]={docgenInfo:j.__docgenInfo,name:"VizLayout",path:"src/components/VizLayout/VizLayout.tsx#VizLayout"})}catch{}try{fe.displayName="getVizStyles",fe.__docgenInfo={description:"",displayName:"getVizStyles",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},isDark:{defaultValue:null,description:"",name:"isDark",required:!0,type:{name:"boolean"}},isLight:{defaultValue:null,description:"",name:"isLight",required:!0,type:{name:"boolean"}},colors:{defaultValue:null,description:"",name:"colors",required:!0,type:{name:"ThemeColors"}},breakpoints:{defaultValue:null,description:"",name:"breakpoints",required:!0,type:{name:"ThemeBreakpoints"}},spacing:{defaultValue:null,description:"",name:"spacing",required:!0,type:{name:"ThemeSpacing"}},shape:{defaultValue:null,description:"",name:"shape",required:!0,type:{name:"ThemeShape"}},components:{defaultValue:null,description:"",name:"components",required:!0,type:{name:"ThemeComponents"}},typography:{defaultValue:null,description:"",name:"typography",required:!0,type:{name:"ThemeTypography"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!0,type:{name:"{ activePanel: number; navbarFixed: number; sidemenu: number; dropdown: number; typeahead: number; tooltip: number; modalBackdrop: number; modal: number; portal: number; }"}},shadows:{defaultValue:null,description:"",name:"shadows",required:!0,type:{name:"ThemeShadows"}},visualization:{defaultValue:null,description:"",name:"visualization",required:!0,type:{name:"ThemeVisualizationColors"}},transitions:{defaultValue:null,description:"",name:"transitions",required:!0,type:{name:"ThemeTransitions"}},v1:{defaultValue:null,description:"@deprecated Will be removed in a future version",name:"v1",required:!0,type:{name:"GrafanaTheme"}},flags:{defaultValue:null,description:"feature flags that might impact component looks",name:"flags",required:!0,type:{name:"{}"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/VizLayout/VizLayout.tsx#getVizStyles"]={docgenInfo:fe.__docgenInfo,name:"getVizStyles",path:"src/components/VizLayout/VizLayout.tsx#getVizStyles"})}catch{}try{y.displayName="VizLayoutLegend",y.__docgenInfo={description:"",displayName:"VizLayoutLegend",props:{placement:{defaultValue:null,description:"",name:"placement",required:!0,type:{name:"enum",value:[{value:'"bottom"'},{value:'"right"'}]}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/VizLayout/VizLayout.tsx#VizLayoutLegend"]={docgenInfo:y.__docgenInfo,name:"VizLayoutLegend",path:"src/components/VizLayout/VizLayout.tsx#VizLayoutLegend"})}catch{}},"./src/utils/colors.ts":function(Ie,ge,O){O.d(ge,{bM:function(){return xe}});var I=O("../../../yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),w=O.n(I),A=O("../../../yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-6df4d07fce.zip/node_modules/tinycolor2/esm/tinycolor.js");const J=4,z="rgba(0, 211, 255, 1)",de="rgba(11, 237, 50, 1)",j="rgba(237, 46, 24, 1)",fe="rgba(150, 150, 150, 1)",y="rgba(247, 149, 32, 1)",Z=.09,V=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function $(ne){const oe=(0,I.map)(ne,X),_e=(0,I.sortBy)(oe,["h"]),x=(0,I.chunk)(_e,J),m=(0,I.map)(x,M=>(0,I.sortBy)(M,"l")),v=(0,I.flattenDeep)((0,I.zip)(...m));return(0,I.map)(v,le)}function X(ne){return(0,A.Z)(ne).toHsl()}function le(ne){return(0,A.Z)(ne).toHexString()}function ve(ne){return tinycolor(ne).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function xe(ne,oe){const _e=(0,A.Z)(ne),x=_e.getBrightness();return _e.getAlpha()<.3?oe?"rgb(247, 248, 250)":"rgb(32, 34, 38)":x>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let Se=$(V)}}]);
